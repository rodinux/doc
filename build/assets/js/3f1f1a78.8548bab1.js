"use strict";(self.webpackChunkyunohost_docs=self.webpackChunkyunohost_docs||[]).push([[8510],{7738:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"administer/backups/avoid_hardware_failure","title":"Avoid hardware failure","description":"Physically secure your server","source":"@site/docs/03.administer/20.backups/20.avoid_hardware_failure.md","sourceDirName":"03.administer/20.backups","slug":"/administer/backups/avoid_hardware_failure","permalink":"/administer/backups/avoid_hardware_failure","draft":false,"unlisted":false,"editUrl":"https://github.com/YunoHost/doc/tree/docusaurus/docs/03.administer/20.backups/20.avoid_hardware_failure.md","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Avoid hardware failure"},"sidebar":"docsSidebar","previous":{"title":"Snapshotting the entire filesystem","permalink":"/administer/backups/clone_filesystem"},"next":{"title":"Include or exclude files","permalink":"/administer/backups/include_exclude_files"}}');var t=r(4848),n=r(8453);const a={title:"Avoid hardware failure"},o=void 0,d={},l=[{value:"Physically secure your server",id:"physically-secure-your-server",level:2},{value:"Secure your hard drives",id:"secure-your-hard-drives",level:2},{value:"Reduce swapiness for SD cards and SSDs",id:"reduce-swapiness-for-sd-cards-and-ssds",level:2},{value:"Storage redundancy",id:"storage-redundancy",level:2}];function c(e){const s={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"physically-secure-your-server",children:"Physically secure your server"}),"\n",(0,t.jsx)(s.p,{children:"Very often people who self-host don't have proper storage for their system. Leaving the server in several parts, in a high traffic area, accessible to children or pets, or in a poorly ventilated area can quickly turn into a disaster."}),"\n",(0,t.jsx)(s.h2,{id:"secure-your-hard-drives",children:"Secure your hard drives"}),"\n",(0,t.jsx)(s.p,{children:"Ideally, your hard disks should be fixed to prevent vibrations which can accelerate the wear of the equipment or even reduce its performance, especially if there is another disk next to it."}),"\n",(0,t.jsx)(s.h2,{id:"reduce-swapiness-for-sd-cards-and-ssds",children:"Reduce swapiness for SD cards and SSDs"}),"\n",(0,t.jsx)(s.p,{children:"If you use a swap file with an SSD or SD card with too much swapiness, your storage media could give up the ghost prematurely due to too many writes."}),"\n",(0,t.jsx)(s.p,{children:"To prevent this:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat /proc/sys/vm/swappiness\n"})}),"\n",(0,t.jsx)(s.p,{children:"If it is above 10:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sysctl vm.swappiness=10\nnano /etc/sysctl.conf\n"})}),"\n",(0,t.jsx)(s.p,{children:"If present, change the vm.swappiness value to 10. Otherwise add the line:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:"vm.swappiness = 10\n"})}),"\n",(0,t.jsx)(s.h2,{id:"storage-redundancy",children:"Storage redundancy"}),"\n",(0,t.jsx)(s.p,{children:"In order to limit hardware failures of storage media, it can be relevant to set up a cluster of mirrored disks (RAID, ZFS). The idea here is that everything that is written to one disk will be written to the other. This way, if one fails, the other continues to work and the server is still fully functional."}),"\n",(0,t.jsx)(s.p,{children:"There are also more advanced clusters that maximize fault tolerance (failure of 2 disks like RAID6) or storage (see RAID 5)."}),"\n",(0,t.jsx)(s.p,{children:"However, these disk clustering techniques should not be considered as backups. A RAID array should be considered as a single storage medium. Indeed, if this technique prevents having to reinstall in case of a probable disk crash, it is far from zero risk."}),"\n",(0,t.jsx)(s.p,{children:"Some examples of situations known to professional system administrators:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"the disks of a cluster mounted with disks of the same brand can fail almost at the same time within a few hours"}),"\n",(0,t.jsx)(s.li,{children:"without monitoring the health of the disks, there is a good chance that the failure of one disk in the cluster will only be noticed when a second one fails (><)"}),"\n",(0,t.jsx)(s.li,{children:"if you don't have a spare disk, the delay in purchasing one may result in the other disk crashing"}),"\n",(0,t.jsx)(s.li,{children:"a half-functional disk that produces errors can propagate its error through the cluster"}),"\n",(0,t.jsx)(s.li,{children:"the disk connectors or the RAID controller can also produce errors or fail"}),"\n",(0,t.jsx)(s.li,{children:"the more complex you make the architecture with many components, the more likely it is that one of them will fail"}),"\n"]}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsx)(s.p,{children:"If you want to set up a RAID array or use btrfs, the easiest way is to do it at installation with the YunoHost iso in expert mode (when partitioning the system)."})})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>o});var i=r(6540);const t={},n=i.createContext(t);function a(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);