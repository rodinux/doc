<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-contribute/packaging_apps/scripts/packaging_app_scripts_helpers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">App helpers (v2) | Yunohost</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.yunohost.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doc.yunohost.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doc.yunohost.org/contribute/packaging_apps/scripts/packaging_app_scripts_helpers"><meta data-rh="true" property="og:locale" content="fr"><meta data-rh="true" property="og:locale:alternate" content="ar"><meta data-rh="true" property="og:locale:alternate" content="ca"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" property="og:locale:alternate" content="it"><meta data-rh="true" property="og:locale:alternate" content="oc"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="App helpers (v2) | Yunohost"><meta data-rh="true" name="description" content="Doc auto-generated by this script on 14/03/2025 (YunoHost version 12.1.2)"><meta data-rh="true" property="og:description" content="Doc auto-generated by this script on 14/03/2025 (YunoHost version 12.1.2)"><link data-rh="true" rel="icon" href="/img/yunohost_favicon.png"><link data-rh="true" rel="canonical" href="https://doc.yunohost.org/contribute/packaging_apps/scripts/packaging_app_scripts_helpers"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/ar/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="ar"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/ca/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="ca"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/de/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="de"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/es/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="es"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/fr/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="fr"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/it/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="it"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/oc/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="oc"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/ru/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="ru"><link data-rh="true" rel="alternate" href="https://doc.yunohost.org/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b7ab3449.css">
<script src="/assets/js/runtime~main.aebf0787.js" defer="defer"></script>
<script src="/assets/js/main.7e58d780.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/YunoHost_logo_vertical.png"><div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/YunoHost_logo_vertical.png" alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/YunoHost_logo_vertical.png" alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div><a href="https://github.com/yunohost/doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/contribute/packaging_apps/scripts/packaging_app_scripts_helpers">Next</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Français</a><ul class="dropdown__menu"><li><a href="/ar/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ar">العربية</a></li><li><a href="/ca/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ca">Català</a></li><li><a href="/de/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/es/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/fr/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="fr">Français</a></li><li><a href="/it/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="it">Italiano</a></li><li><a href="/oc/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="oc">Occitan</a></li><li><a href="/ru/contribute/packaging_apps/scripts/packaging_app_scripts_helpers" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Retour au début de la page" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/YunoHost_logo_vertical.png" alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/YunoHost_logo_vertical.png" alt="Yunohost Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Docs</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Docs introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/overview">Overview</a><button aria-label="Développer la catégorie &#x27;Overview&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/install/">Install</a><button aria-label="Développer la catégorie &#x27;Install&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/administration-guide">Administration guide</a><button aria-label="Développer la catégorie &#x27;Administration guide&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/user_guide/">User Guide</a><button aria-label="Développer la catégorie &#x27;User Guide&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/community">Community</a><button aria-label="Développer la catégorie &#x27;Community&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/contribute/">Contribute</a><button aria-label="Réduire la catégorie &#x27;Contribute&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/contribute/write_documentation/">Write documentation</a><button aria-label="Développer la catégorie &#x27;Write documentation&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/contribute/packaging_apps/">Packaging applications</a><button aria-label="Réduire la catégorie &#x27;Packaging applications&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/contribute/packaging_apps/manifest/">Writing the app manifest</a><button aria-label="Réduire la catégorie &#x27;Writing the app manifest&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/manifest/app_resources">App resources</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/contribute/packaging_apps/scripts/">Writing app scripts</a><button aria-label="Réduire la catégorie &#x27;Writing app scripts&#x27; de la barre latérale" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/scripts/shell_variables_scope">General scope of variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contribute/packaging_apps/scripts/packaging_app_scripts_helpers">App helpers (v2)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/scripts/packaging_app_scripts_helpers_v21">App helpers (v2.1)</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/doc">Adding documentation to your app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/testing">Testing your app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/publishing">Publishing your app on the catalog</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/advanced">Advanced</a><button aria-label="Développer la catégorie &#x27;Advanced&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/misc-resources">Misc resources</a><button aria-label="Développer la catégorie &#x27;Misc resources&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contribute/packaging_apps/policy">Apps catalog policy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/contribute/dev/">Contributing to the core</a><button aria-label="Développer la catégorie &#x27;Contributing to the core&#x27; de la barre latérale" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://apps.yunohost.org" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Applications<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://forum.yunohost.org" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Fil d&#x27;Ariane"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Page d&#x27;accueil" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/contribute/"><span itemprop="name">Contribute</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/contribute/packaging_apps/"><span itemprop="name">Packaging applications</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/contribute/packaging_apps/scripts/"><span itemprop="name">Writing app scripts</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">App helpers (v2)</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Sur cette page</button></div><div class="theme-doc-markdown markdown"><header><h1>App helpers (v2)</h1></header><p>Doc auto-generated by <a href="https://github.com/YunoHost/doc/blob/7dec46a013529fd2900b66782b4e097d88f07745/scripts/helpers_doc_generate.py" target="_blank" rel="noopener noreferrer">this script</a> on 14/03/2025 (YunoHost version 12.1.2)</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sources">Sources<a href="#sources" class="hash-link" aria-label="Lien direct vers Sources" title="Lien direct vers Sources">​</a></h2>
<p>This is coupled to the &#x27;sources&#x27; resource in the manifest.toml</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sources-1">SOURCES<a href="#sources-1" class="hash-link" aria-label="Lien direct vers SOURCES" title="Lien direct vers SOURCES">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_setup_source">ynh_setup_source<a href="#ynh_setup_source" class="hash-link" aria-label="Lien direct vers ynh_setup_source" title="Lien direct vers ynh_setup_source">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Download, check integrity, uncompress and patch the source from app.src</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_setup_source --dest_dir=dest_dir [--source_id=source_id] [--keep=&quot;file1 file2&quot;] [--full_replace]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--dest_dir=</code>: Directory where to setup sources</li>
<li><code>-s</code>, <code>--source_id=</code>: Name of the source, defaults to <code>main</code> (when the sources resource exists in manifest.toml) or (legacy) <code>app</code> otherwise</li>
<li><code>-k</code>, <code>--keep=</code>: Space-separated list of files/folders that will be backup/restored in $dest_dir, such as a config file you don&#x27;t want to overwrite. For example &#x27;conf.json secrets.json logs&#x27; (no trailing <code>/</code> for folders)</li>
<li><code>-r</code>, <code>--full_replace=</code>: Remove previous sources before installing new sources (can be 1 or 0, default to 0)</li>
</ul><p><strong>Details</strong>:</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="new-sources-resources">New &#x27;sources&#x27; resources<a href="#new-sources-resources" class="hash-link" aria-label="Lien direct vers New &#x27;sources&#x27; resources" title="Lien direct vers New &#x27;sources&#x27; resources">​</a></h5><p>(See also the resources documentation which may be more complete?)</p><p>This helper will read infos from the &#x27;sources&#x27; resources in the manifest.toml of the app
and expect a structure like:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[resources.sources]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [resources.sources.main]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url = &quot;https://some.address.to/download/the/app/archive&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sha256 = &quot;0123456789abcdef&quot;    # The sha256 sum of the asset obtained from the URL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-flags">Optional flags<a href="#optional-flags" class="hash-link" aria-label="Lien direct vers Optional flags" title="Lien direct vers Optional flags">​</a></h5><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">format    = &quot;tar.gz&quot;/xz/bz2    # automatically guessed from the extension of the URL, but can be set explicitly. Will use `tar` to extract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;zip&quot;              # automatically guessed from the extension of the URL, but can be set explicitly. Will use `unzip` to extract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;docker&quot;           # useful to extract files from an already-built docker image (instead of rebuilding them locally). Will use `docker-image-extract` to extract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;whatever&quot;         # an arbitrary value, not really meaningful except to imply that the file won&#x27;t be extracted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">in_subdir = true    # default, there&#x27;s an intermediate subdir in the archive before accessing the actual files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            false   # sources are directly in the archive root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            n       # (special cases) an integer representing a number of subdirs levels to get rid of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">extract   = true    # default if file is indeed an archive such as .zip, .tar.gz, .tar.bz2, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          = false   # default if file &#x27;format&#x27; is not set and the file is not to be extracted because it is not an archive but a script or binary or whatever asset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    #    in which case the file will only be `mv`ed to the location possibly renamed using the `rename` value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rename    = &quot;whatever_your_want&quot;   # to be used for convenience when `extract` is false and the default name of the file is not practical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">platform  = &quot;linux/amd64&quot;          # (defaults to &quot;linux/$YNH_ARCH&quot;) to be used in conjonction with `format = &quot;docker&quot;` to specify which architecture to extract for</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may also define assets url and checksum per-architectures such as:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[resources.sources]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [resources.sources.main]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amd64.url = &quot;https://some.address.to/download/the/app/archive/when/amd64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    amd64.sha256 = &quot;0123456789abcdef&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    armhf.url = &quot;https://some.address.to/download/the/app/archive/when/armhf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    armhf.sha256 = &quot;fedcba9876543210&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In which case <code>ynh_setup_source --dest_dir=&quot;$install_dir&quot;</code> will automatically pick the appropriate source depending on the arch</p><p>The helper will:</p><ul>
<li>Download the specific URL if there is no local archive</li>
<li>Check the integrity with the specific sha256 sum</li>
<li>Uncompress the archive to <code>$dest_dir</code>.<!-- -->
<ul>
<li>If <code>in_subdir</code> is true, the first level directory of the archive will be removed.</li>
<li>If <code>in_subdir</code> is a numeric value, the N first level directories will be removed.</li>
</ul>
</li>
<li>Patches named <code>sources/patches/${src_id}-*.patch</code> will be applied to <code>$dest_dir</code></li>
<li>Extra files in <code>sources/extra_files/$src_id</code> will be copied to dest_dir</li>
</ul><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/sources#L85" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="app-technologies">App Technologies<a href="#app-technologies" class="hash-link" aria-label="Lien direct vers App Technologies" title="Lien direct vers App Technologies">​</a></h2>
<p>These allow to install specific version of the technology required to run some apps</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs">NODEJS<a href="#nodejs" class="hash-link" aria-label="Lien direct vers NODEJS" title="Lien direct vers NODEJS">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_use_nodejs">ynh_use_nodejs<a href="#ynh_use_nodejs" class="hash-link" aria-label="Lien direct vers ynh_use_nodejs" title="Lien direct vers ynh_use_nodejs">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Load the version of node for an app, and set variables.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_use_nodejs</code></p><p><strong>Details</strong>:
<code>ynh_use_nodejs</code> has to be used in any app scripts before using node for the first time.
This helper will provide alias and variables to use in your scripts.</p><p>To use npm or node, use the alias <code>ynh_npm</code> and <code>ynh_node</code>.</p><p>Those alias will use the correct version installed for the app.
For example: use <code>ynh_npm install</code> instead of <code>npm install</code></p><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_npm</code> and <code>$ynh_node</code>
And propagate $PATH to sudo with $ynh_node_load_PATH
Exemple: <code>ynh_exec_as $app $ynh_node_load_PATH $ynh_npm install</code></p><p>$PATH contains the path of the requested version of node.
However, $PATH is duplicated into $node_PATH to outlast any manipulation of <code>$PATH</code>
You can use the variable <code>$ynh_node_load_PATH</code> to quickly load your node version
in $PATH for an usage into a separate script.
Exemple: $ynh_node_load_PATH $final_path/script_that_use_npm.sh`</p><p>Finally, to start a nodejs service with the correct version, 2 solutions
Either the app is dependent of node or npm, but does not called it directly.
In such situation, you need to load PATH :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Environment=&quot;__NODE_ENV_PATH__&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=__FINALPATH__/my_app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will replace <strong>NODE_ENV_PATH</strong> with $ynh_node_load_PATH.</p><p>Or node start the app directly, then you don&#x27;t need to load the PATH variable</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=__YNH_NODE__ my_app run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will replace <strong>YNH_NODE</strong> with $ynh_node</p><p>2 other variables are also available</p><ul>
<li>$nodejs_path: The absolute path to node binaries for the chosen version.</li>
<li>$nodejs_version: Just the version number of node for this app. Stored as &#x27;nodejs_version&#x27; in settings.yml.</li>
</ul><p>Requires YunoHost version 2.7.12 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nodejs#L70" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_nodejs">ynh_install_nodejs<a href="#ynh_install_nodejs" class="hash-link" aria-label="Lien direct vers ynh_install_nodejs" title="Lien direct vers ynh_install_nodejs">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install a specific version of nodejs</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_nodejs --nodejs_version=nodejs_version</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-n</code>, <code>--nodejs_version=</code>: Version of node to install. When possible, your should prefer to use major version number (e.g. 8 instead of 8.10.0).</li>
</ul><p><strong>Details</strong>:
ynh_install_nodejs will install the version of node provided as argument by using n.</p><p><code>n</code> (Node version management) uses the <code>PATH</code> variable to store the path of the version of node it is going to use.
That&#x27;s how it changes the version</p><p>Refer to <code>ynh_use_nodejs</code> for more information about available commands and variables</p><p>Requires YunoHost version 2.7.12 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nodejs#L112" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_nodejs">ynh_remove_nodejs<a href="#ynh_remove_nodejs" class="hash-link" aria-label="Lien direct vers ynh_remove_nodejs" title="Lien direct vers ynh_remove_nodejs">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the version of node used by the app.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_nodejs</code></p><p><strong>Details</strong>:
This helper will check if another app uses the same version of node.</p><ul>
<li>If not, this version of node will be removed.</li>
<li>If no other app uses node, n will be also removed.</li>
</ul><p>Requires YunoHost version 2.7.12 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nodejs#L182" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ruby">RUBY<a href="#ruby" class="hash-link" aria-label="Lien direct vers RUBY" title="Lien direct vers RUBY">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_use_ruby">ynh_use_ruby<a href="#ynh_use_ruby" class="hash-link" aria-label="Lien direct vers ynh_use_ruby" title="Lien direct vers ynh_use_ruby">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Load the version of Ruby for an app, and set variables.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_use_ruby</code></p><p><strong>Details</strong>:
ynh_use_ruby has to be used in any app scripts before using Ruby for the first time.
This helper will provide alias and variables to use in your scripts.</p><p>To use gem or Ruby, use the alias <code>ynh_gem</code> and <code>ynh_ruby</code>
Those alias will use the correct version installed for the app
For example: use <code>ynh_gem install</code> instead of <code>gem install</code></p><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_gem</code> and <code>$ynh_ruby</code>
And propagate $PATH to sudo with $ynh_ruby_load_path
Exemple: <code>ynh_exec_as $app $ynh_ruby_load_path $ynh_gem install</code></p><p>$PATH contains the path of the requested version of Ruby.
However, $PATH is duplicated into $ruby_path to outlast any manipulation of $PATH
You can use the variable <code>$ynh_ruby_load_path</code> to quickly load your Ruby version
in $PATH for an usage into a separate script.
Exemple: $ynh_ruby_load_path $final_path/script_that_use_gem.sh`</p><p>Finally, to start a Ruby service with the correct version, 2 solutions
Either the app is dependent of Ruby or gem, but does not called it directly.
In such situation, you need to load PATH
<code>Environment=&quot;__YNH_RUBY_LOAD_PATH__&quot;</code>
<code>ExecStart=__FINALPATH__/my_app</code>
You will replace <strong>YNH_RUBY_LOAD_PATH</strong> with $ynh_ruby_load_path</p><p>Or Ruby start the app directly, then you don&#x27;t need to load the PATH variable
<code>ExecStart=__YNH_RUBY__ my_app run</code>
You will replace <strong>YNH_RUBY</strong> with $ynh_ruby</p><p>one other variable is also available</p><ul>
<li>$ruby_path: The absolute path to Ruby binaries for the chosen version.</li>
</ul><p>Requires YunoHost version 3.2.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/ruby#L71" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_ruby">ynh_install_ruby<a href="#ynh_install_ruby" class="hash-link" aria-label="Lien direct vers ynh_install_ruby" title="Lien direct vers ynh_install_ruby">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install a specific version of Ruby</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_ruby --ruby_version=ruby_version</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-v</code>, <code>--ruby_version=</code>: Version of ruby to install.</li>
</ul><p><strong>Details</strong>:
ynh_install_ruby will install the version of Ruby provided as argument by using rbenv.</p><p>This helper creates a /etc/profile.d/rbenv.sh that configures PATH environment for rbenv
for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin)</p><p>Don&#x27;t forget to execute ruby-dependent command in a login environment
(e.g. sudo --login option)
When not possible (e.g. in systemd service definition), please use direct path
to rbenv shims (e.g. $RBENV_ROOT/shims/bundle)</p><p>Requires YunoHost version 3.2.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/ruby#L116" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_ruby">ynh_remove_ruby<a href="#ynh_remove_ruby" class="hash-link" aria-label="Lien direct vers ynh_remove_ruby" title="Lien direct vers ynh_remove_ruby">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the version of Ruby used by the app.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_ruby</code></p><p><strong>Details</strong>:
This helper will also cleanup Ruby versions</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/ruby#L257" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_cleanup_ruby">ynh_cleanup_ruby<a href="#ynh_cleanup_ruby" class="hash-link" aria-label="Lien direct vers ynh_cleanup_ruby" title="Lien direct vers ynh_cleanup_ruby">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove no more needed versions of Ruby used by the app.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_cleanup_ruby</code></p><p><strong>Details</strong>:
This helper will check what Ruby version are no more required,
and uninstall them
If no app uses Ruby, rbenv will be also removed.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/ruby#L282" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="go">GO<a href="#go" class="hash-link" aria-label="Lien direct vers GO" title="Lien direct vers GO">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_use_go">ynh_use_go<a href="#ynh_use_go" class="hash-link" aria-label="Lien direct vers ynh_use_go" title="Lien direct vers ynh_use_go">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Load the version of Go for an app, and set variables.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_use_go</code></p><p><strong>Details</strong>:
ynh_use_go has to be used in any app scripts before using Go for the first time.
This helper will provide alias and variables to use in your scripts.</p><p>To use gem or Go, use the alias <code>ynh_gem</code> and <code>ynh_go</code>
Those alias will use the correct version installed for the app
For example: use <code>ynh_gem install</code> instead of <code>gem install</code></p><p>With <code>sudo</code> or <code>ynh_exec_as</code>, use instead the fallback variables <code>$ynh_gem</code> and <code>$ynh_go</code>
And propagate $PATH to sudo with $ynh_go_load_path
Exemple: <code>ynh_exec_as $app $ynh_go_load_path $ynh_gem install</code></p><p>$PATH contains the path of the requested version of Go.
However, $PATH is duplicated into $go_path to outlast any manipulation of $PATH
You can use the variable <code>$ynh_go_load_path</code> to quickly load your Go version
in $PATH for an usage into a separate script.
Exemple: <code>$ynh_go_load_path $install_dir/script_that_use_gem.sh</code></p><p>Finally, to start a Go service with the correct version, 2 solutions
Either the app is dependent of Go or gem, but does not called it directly.
In such situation, you need to load PATH
<code>Environment=&quot;__YNH_GO_LOAD_PATH__&quot;</code>
<code>ExecStart=__INSTALL_DIR__/my_app</code>
You will replace <strong>YNH_GO_LOAD_PATH</strong> with $ynh_go_load_path</p><p>Or Go start the app directly, then you don&#x27;t need to load the PATH variable
<code>ExecStart=__YNH_GO__ my_app run</code>
You will replace <strong>YNH_GO</strong> with $ynh_go</p><p>one other variable is also available</p><ul>
<li>$go_path: The absolute path to Go binaries for the chosen version.</li>
</ul><p>Requires YunoHost version 3.2.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/go#L72" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_go">ynh_install_go<a href="#ynh_install_go" class="hash-link" aria-label="Lien direct vers ynh_install_go" title="Lien direct vers ynh_install_go">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install a specific version of Go</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_go --go_version=go_version</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-v</code>, <code>--go_version=</code>: Version of go to install.</li>
</ul><p><strong>Details</strong>:
ynh_install_go will install the version of Go provided as argument by using goenv.</p><p>This helper creates a /etc/profile.d/goenv.sh that configures PATH environment for goenv
for every LOGIN user, hence your user must have a defined shell (as opposed to /usr/sbin/nologin)</p><p>Don&#x27;t forget to execute go-dependent command in a login environment
(e.g. sudo --login option)
When not possible (e.g. in systemd service definition), please use direct path
to goenv shims (e.g. $goenv_ROOT/shims/bundle)</p><p>Requires YunoHost version 3.2.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/go#L114" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_go">ynh_remove_go<a href="#ynh_remove_go" class="hash-link" aria-label="Lien direct vers ynh_remove_go" title="Lien direct vers ynh_remove_go">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the version of Go used by the app.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_go</code></p><p><strong>Details</strong>:
This helper will also cleanup Go versions</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/go#L203" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_cleanup_go">ynh_cleanup_go<a href="#ynh_cleanup_go" class="hash-link" aria-label="Lien direct vers ynh_cleanup_go" title="Lien direct vers ynh_cleanup_go">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove no more needed versions of Go used by the app.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_cleanup_go</code></p><p><strong>Details</strong>:
This helper will check what Go version are no more required,
and uninstall them
If no app uses Go, goenv will be also removed.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/go#L226" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="composer">COMPOSER<a href="#composer" class="hash-link" aria-label="Lien direct vers COMPOSER" title="Lien direct vers COMPOSER">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_composer_exec">ynh_composer_exec<a href="#ynh_composer_exec" class="hash-link" aria-label="Lien direct vers ynh_composer_exec" title="Lien direct vers ynh_composer_exec">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command with Composer</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_composer_exec [--phpversion=phpversion] [--workdir=$install_dir] --commands=&quot;commands&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-v</code>, <code>--phpversion</code>: PHP version to use with composer</li>
<li><code>-w</code>, <code>--workdir</code>: The directory from where the command will be executed. Default $install_dir or $final_path</li>
<li><code>-c</code>, <code>--commands</code>: Commands to execute.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/composer#L34" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_composer">ynh_install_composer<a href="#ynh_install_composer" class="hash-link" aria-label="Lien direct vers ynh_install_composer" title="Lien direct vers ynh_install_composer">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install and initialize Composer in the given directory</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_composer [--phpversion=phpversion] [--workdir=$install_dir] [--install_args=&quot;--optimize-autoloader&quot;] [--composerversion=composerversion]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-v</code>, <code>--phpversion</code>: PHP version to use with composer</li>
<li><code>-w</code>, <code>--workdir</code>: The directory from where the command will be executed. Default $install_dir.</li>
<li><code>-a</code>, <code>--install_args</code>: Additional arguments provided to the composer install. Argument --no-dev already include</li>
<li><code>-c</code>, <code>--composerversion</code>: Composer version to install</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/composer#L66" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="databases">Databases<a href="#databases" class="hash-link" aria-label="Lien direct vers Databases" title="Lien direct vers Databases">​</a></h2>
<p>This is coupled to the &#x27;database&#x27; resource in the manifest.toml - at least for mysql/postgresql. Mongodb/redis may have better integration in the future.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mysql">MYSQL<a href="#mysql" class="hash-link" aria-label="Lien direct vers MYSQL" title="Lien direct vers MYSQL">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mysql_connect_as">ynh_mysql_connect_as<a href="#ynh_mysql_connect_as" class="hash-link" aria-label="Lien direct vers ynh_mysql_connect_as" title="Lien direct vers ynh_mysql_connect_as">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Open a connection as a user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mysql_connect_as --user=user --password=password [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--user=</code>: the user name to connect as</li>
<li><code>-p</code>, <code>--password=</code>: the user password</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Examples</strong>:</p><ul>
<li><code>ynh_mysql_connect_as --user=&quot;user&quot; --password=&quot;pass&quot; &lt;&lt;&lt; &quot;UPDATE ...;&quot;</code></li>
<li><code>ynh_mysql_connect_as --user=&quot;user&quot; --password=&quot;pass&quot; &lt; /path/to/file.sql</code></li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mysql#L33" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mysql_execute_as_root">ynh_mysql_execute_as_root<a href="#ynh_mysql_execute_as_root" class="hash-link" aria-label="Lien direct vers ynh_mysql_execute_as_root" title="Lien direct vers ynh_mysql_execute_as_root">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command as root user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mysql_execute_as_root --sql=sql [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--sql=</code>: the SQL command to execute</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mysql#L54" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mysql_execute_file_as_root">ynh_mysql_execute_file_as_root<a href="#ynh_mysql_execute_file_as_root" class="hash-link" aria-label="Lien direct vers ynh_mysql_execute_file_as_root" title="Lien direct vers ynh_mysql_execute_file_as_root">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command from a file as root user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mysql_execute_file_as_root --file=file [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: the file containing SQL commands</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mysql#L78" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mysql_dump_db">ynh_mysql_dump_db<a href="#ynh_mysql_dump_db" class="hash-link" aria-label="Lien direct vers ynh_mysql_dump_db" title="Lien direct vers ynh_mysql_dump_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Dump a database</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mysql_dump_db --database=database</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: the database name to dump</li>
</ul><p><strong>Returns</strong>: The mysqldump output</p><p><strong>Example</strong>: <code>ynh_mysql_dump_db --database=roundcube &gt; ./dump.sql</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mysql#L146" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="postgresql">POSTGRESQL<a href="#postgresql" class="hash-link" aria-label="Lien direct vers POSTGRESQL" title="Lien direct vers POSTGRESQL">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_psql_connect_as">ynh_psql_connect_as<a href="#ynh_psql_connect_as" class="hash-link" aria-label="Lien direct vers ynh_psql_connect_as" title="Lien direct vers ynh_psql_connect_as">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Open a connection as a user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_psql_connect_as --user=user --password=password [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--user=</code>: the user name to connect as</li>
<li><code>-p</code>, <code>--password=</code>: the user password</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Examples</strong>:</p><ul>
<li><code>ynh_psql_connect_as &#x27;user&#x27; &#x27;pass&#x27; &lt;&lt;&lt; &quot;UPDATE ...;&quot;</code></li>
<li><code>ynh_psql_connect_as &#x27;user&#x27; &#x27;pass&#x27; &lt; /path/to/file.sql</code></li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/postgresql#L36" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_psql_execute_as_root">ynh_psql_execute_as_root<a href="#ynh_psql_execute_as_root" class="hash-link" aria-label="Lien direct vers ynh_psql_execute_as_root" title="Lien direct vers ynh_psql_execute_as_root">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command as root user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_psql_execute_as_root --sql=sql [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--sql=</code>: the SQL command to execute</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/postgresql#L57" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_psql_execute_file_as_root">ynh_psql_execute_file_as_root<a href="#ynh_psql_execute_file_as_root" class="hash-link" aria-label="Lien direct vers ynh_psql_execute_file_as_root" title="Lien direct vers ynh_psql_execute_file_as_root">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command from a file as root user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_psql_execute_file_as_root --file=file [--database=database]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: the file containing SQL commands</li>
<li><code>-d</code>, <code>--database=</code>: the database to connect to</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/postgresql#L82" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_psql_dump_db">ynh_psql_dump_db<a href="#ynh_psql_dump_db" class="hash-link" aria-label="Lien direct vers ynh_psql_dump_db" title="Lien direct vers ynh_psql_dump_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Dump a database</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_psql_dump_db --database=database</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: the database name to dump</li>
</ul><p><strong>Returns</strong>: the psqldump output</p><p><strong>Example</strong>: <code>ynh_psql_dump_db &#x27;roundcube&#x27; &gt; ./dump.sql</code></p><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/postgresql#L153" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_psql_database_exists">ynh_psql_database_exists<a href="#ynh_psql_database_exists" class="hash-link" aria-label="Lien direct vers ynh_psql_database_exists" title="Lien direct vers ynh_psql_database_exists">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a psql database exists</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_psql_database_exists --database=database | exit: Return 1 if the database doesn&#x27;t exist, 0 otherwise</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: the database for which to check existence</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/postgresql#L210" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mongodb">MONGODB<a href="#mongodb" class="hash-link" aria-label="Lien direct vers MONGODB" title="Lien direct vers MONGODB">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_exec">ynh_mongo_exec<a href="#ynh_mongo_exec" class="hash-link" aria-label="Lien direct vers ynh_mongo_exec" title="Lien direct vers ynh_mongo_exec">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a mongo command
example: ynh_mongo_exec --command=&#x27;db.getMongo().getDBNames().indexOf(&quot;wekan&quot;)&#x27;
example: ynh_mongo_exec --command=&quot;db.getMongo().getDBNames().indexOf(&amp;#34;wekan&amp;#34;)&quot;</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_exec [--user=user] [--password=password] [--authenticationdatabase=authenticationdatabase] [--database=database] [--host=host] [--port=port] --command=&quot;command&quot; [--eval]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--user=</code>: The user name to connect as</li>
<li><code>-p</code>, <code>--password=</code>: The user password</li>
<li><code>-d</code>, <code>--authenticationdatabase=</code>: The authenticationdatabase to connect to</li>
<li><code>-d</code>, <code>--database=</code>: The database to connect to</li>
<li><code>-h</code>, <code>--host=</code>: The host to connect to</li>
<li><code>-P</code>, <code>--port=</code>: The port to connect to</li>
<li><code>-c</code>, <code>--command=</code>: The command to evaluate</li>
<li><code>-e</code>, <code>--eval</code>: Evaluate instead of execute the command.</li>
</ul><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L35" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_dump_db">ynh_mongo_dump_db<a href="#ynh_mongo_dump_db" class="hash-link" aria-label="Lien direct vers ynh_mongo_dump_db" title="Lien direct vers ynh_mongo_dump_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Dump a database</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_dump_db --database=database</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: The database name to dump</li>
</ul><p><strong>Returns</strong>: the mongodump output</p><p><strong>Example</strong>: <code>ynh_mongo_dump_db --database=wekan &gt; ./dump.bson</code></p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L144" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_database_exists">ynh_mongo_database_exists<a href="#ynh_mongo_database_exists" class="hash-link" aria-label="Lien direct vers ynh_mongo_database_exists" title="Lien direct vers ynh_mongo_database_exists">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a mongo database exists</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_database_exists --database=database | exit: Return 1 if the database doesn&#x27;t exist, 0 otherwise</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: The database for which to check existence</li>
</ul><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L189" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_restore_db">ynh_mongo_restore_db<a href="#ynh_mongo_restore_db" class="hash-link" aria-label="Lien direct vers ynh_mongo_restore_db" title="Lien direct vers ynh_mongo_restore_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Restore a database</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_restore_db --database=database</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-d</code>, <code>--database=</code>: The database name to restore</li>
</ul><p><strong>Example</strong>: <code>ynh_mongo_restore_db --database=wekan &lt; ./dump.bson</code></p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L212" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_setup_db">ynh_mongo_setup_db<a href="#ynh_mongo_setup_db" class="hash-link" aria-label="Lien direct vers ynh_mongo_setup_db" title="Lien direct vers ynh_mongo_setup_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a database, an user and its password. Then store the password in the app&#x27;s config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_setup_db --db_user=user --db_name=name [--db_pwd=pwd]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--db_user=</code>: Owner of the database</li>
<li><code>-n</code>, <code>--db_name=</code>: Name of the database</li>
<li><code>-p</code>, <code>--db_pwd=</code>: Password of the database. If not provided, a password will be generated</li>
</ul><p><strong>Details</strong>:
After executing this helper, the password of the created database will be available in $db_pwd
It will also be stored as &quot;mongopwd&quot; into the app settings.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L255" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_mongo_remove_db">ynh_mongo_remove_db<a href="#ynh_mongo_remove_db" class="hash-link" aria-label="Lien direct vers ynh_mongo_remove_db" title="Lien direct vers ynh_mongo_remove_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove a database if it exists, and the associated user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_mongo_remove_db --db_user=user --db_name=name</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--db_user=</code>: Owner of the database</li>
<li><code>-n</code>, <code>--db_name=</code>: Name of the database</li>
</ul><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L283" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_mongo">ynh_install_mongo<a href="#ynh_install_mongo" class="hash-link" aria-label="Lien direct vers ynh_install_mongo" title="Lien direct vers ynh_install_mongo">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install MongoDB and integrate MongoDB service in YunoHost</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_mongo [--mongo_version=mongo_version]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--mongo_version=</code>: Version of MongoDB to install</li>
</ul><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L308" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_mongo">ynh_remove_mongo<a href="#ynh_remove_mongo" class="hash-link" aria-label="Lien direct vers ynh_remove_mongo" title="Lien direct vers ynh_remove_mongo">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove MongoDB
Only remove the MongoDB service integration in YunoHost for now
if MongoDB package as been removed</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_mongo</code></p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/mongodb#L351" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redis">REDIS<a href="#redis" class="hash-link" aria-label="Lien direct vers REDIS" title="Lien direct vers REDIS">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_redis_get_free_db">ynh_redis_get_free_db<a href="#ynh_redis_get_free_db" class="hash-link" aria-label="Lien direct vers ynh_redis_get_free_db" title="Lien direct vers ynh_redis_get_free_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>get the first available redis database</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_redis_get_free_db</code></p><p><strong>Returns</strong>: the database number to use</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/redis#L25" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_redis_remove_db">ynh_redis_remove_db<a href="#ynh_redis_remove_db" class="hash-link" aria-label="Lien direct vers ynh_redis_remove_db" title="Lien direct vers ynh_redis_remove_db">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a master password and set up global settings
Please always call this script in install and restore scripts</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_redis_remove_db database</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>database</code>: the database to erase</li>
</ul><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/redis#L52" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configurations--templating">Configurations / Templating<a href="#configurations--templating" class="hash-link" aria-label="Lien direct vers Configurations / Templating" title="Lien direct vers Configurations / Templating">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="templating">TEMPLATING<a href="#templating" class="hash-link" aria-label="Lien direct vers TEMPLATING" title="Lien direct vers TEMPLATING">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_add_config">ynh_add_config<a href="#ynh_add_config" class="hash-link" aria-label="Lien direct vers ynh_add_config" title="Lien direct vers ynh_add_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a dedicated config file from a template</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_add_config --template=&quot;template&quot; --destination=&quot;destination&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-t</code>, <code>--template=</code>: Template config file to use</li>
<li><code>-d</code>, <code>--destination=</code>: Destination of the config file</li>
<li><code>-j</code>, <code>--jinja</code>: Use jinja template instead of the simple <code>__MY_VAR__</code> templating format</li>
</ul><p><strong>Examples</strong>:</p><ul>
<li><code>ynh_add_config --template=&quot;.env&quot; --destination=&quot;$install_dir/.env&quot;   # (use the template file &quot;conf/.env&quot; from the app&#x27;s package)</code></li>
<li><code>ynh_add_config --jinja --template=&quot;config.j2&quot; --destination=&quot;$install_dir/config&quot;    # (use the template file &quot;conf/config.j2&quot; from the app&#x27;s package)</code></li>
</ul><p><strong>Details</strong>:
The template can be by default the name of a file in the conf directory
of a YunoHost Package, a relative path or an absolute path.</p><p>The helper will use the template <code>template</code> to generate a config file
<code>destination</code> by replacing the following keywords with global variables
that should be defined before calling this helper :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  __PATH__                by $path_url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __NAME__                by $app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __NAMETOCHANGE__        by $app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __USER__                by $app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __FINALPATH__           by $final_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __PHPVERSION__          by $YNH_PHP_VERSION (packaging v1 only, packaging v2 uses phpversion setting implicitly set by apt resource)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __YNH_NODE_LOAD_PATH__  by $ynh_node_load_PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And any dynamic variables that should be defined before calling this helper like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  __DOMAIN__   by $domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __APP__      by $app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __VAR_1__    by $var_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  __VAR_2__    by $var_2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="when---jinja-is-enabled">When --jinja is enabled<a href="#when---jinja-is-enabled" class="hash-link" aria-label="Lien direct vers When --jinja is enabled" title="Lien direct vers When --jinja is enabled">​</a></h5><p>This option is meant for advanced use-cases where the &quot;simple&quot; templating
mode ain&#x27;t enough because you need conditional blocks or loops.</p><p>For a full documentation of jinja&#x27;s syntax you can refer to:
<a href="https://jinja.palletsprojects.com/en/3.1.x/templates/" target="_blank" rel="noopener noreferrer">https://jinja.palletsprojects.com/en/3.1.x/templates/</a></p><p>Note that in YunoHost context, all variables are from shell variables and therefore are strings</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="keeping-track-of-manual-changes-by-the-admin">Keeping track of manual changes by the admin<a href="#keeping-track-of-manual-changes-by-the-admin" class="hash-link" aria-label="Lien direct vers Keeping track of manual changes by the admin" title="Lien direct vers Keeping track of manual changes by the admin">​</a></h5><p>The helper will verify the checksum and backup the destination file
if it&#x27;s different before applying the new template.</p><p>And it will calculate and store the destination file checksum
into the app settings when configuration is done.</p><p>Requires YunoHost version 4.1.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/templating#L74" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_read_var_in_file">ynh_read_var_in_file<a href="#ynh_read_var_in_file" class="hash-link" aria-label="Lien direct vers ynh_read_var_in_file" title="Lien direct vers ynh_read_var_in_file">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Get a value from heterogeneous file (yaml, json, php, python...)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_read_var_in_file --file=PATH --key=KEY</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: the path to the file</li>
<li><code>-k</code>, <code>--key=</code>: the key to get</li>
<li><code>-a</code>, <code>--after=</code>: the line just before the key (in case of multiple lines with the name of the key in the file)</li>
</ul><p><strong>Details</strong>:
This helpers match several var affectation use case in several languages
We don&#x27;t use jq or equivalent to keep comments and blank space in files
This helpers work line by line, it is not able to work correctly
if you have several identical keys in your files</p><p>Example of line this helpers can managed correctly
.yml
title: YunoHost documentation
email: &#x27;<a href="mailto:yunohost@yunohost.org" target="_blank" rel="noopener noreferrer">yunohost@yunohost.org</a>&#x27;
.json
&quot;theme&quot;: &quot;colib&#x27;ris&quot;,
&quot;port&quot;: 8102
&quot;some_boolean&quot;:     false,
&quot;user&quot;: null
.ini
some_boolean = On
action = &quot;Clear&quot;
port = 20
.php
$user=
user =&gt; 20
.py
USER = 8102
user = &#x27;<a href="https://donate.local" target="_blank" rel="noopener noreferrer">https://donate.local</a>&#x27;
CUSTOM[&#x27;user&#x27;] = &#x27;YunoHost&#x27;</p><p>Requires YunoHost version 4.3 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/templating#L239" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_write_var_in_file">ynh_write_var_in_file<a href="#ynh_write_var_in_file" class="hash-link" aria-label="Lien direct vers ynh_write_var_in_file" title="Lien direct vers ynh_write_var_in_file">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Set a value into heterogeneous file (yaml, json, php, python...)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_write_var_in_file --file=PATH --key=KEY --value=VALUE</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: the path to the file</li>
<li><code>-k</code>, <code>--key=</code>: the key to set</li>
<li><code>-v</code>, <code>--value=</code>: the value to set</li>
<li><code>-a</code>, <code>--after=</code>: the line just before the key (in case of multiple lines with the name of the key in the file)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.3 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/templating#L317" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nginx">NGINX<a href="#nginx" class="hash-link" aria-label="Lien direct vers NGINX" title="Lien direct vers NGINX">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_add_nginx_config">ynh_add_nginx_config<a href="#ynh_add_nginx_config" class="hash-link" aria-label="Lien direct vers ynh_add_nginx_config" title="Lien direct vers ynh_add_nginx_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a dedicated nginx config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_add_nginx_config</code></p><p><strong>Details</strong>:
This will use a template in <code>../conf/nginx.conf</code>
See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.</p><p>Additionally, ynh_add_nginx_config will replace:</p><ul>
<li><code>#sub_path_only</code>      by empty string if <code>path_url</code> is not <code>&#x27;/&#x27;</code></li>
<li><code>#root_path_only</code>     by empty string if <code>path_url</code>  <em>is</em>  <code>&#x27;/&#x27;</code></li>
</ul><p>This allows to enable/disable specific behaviors dependenging on the install
location</p><p>Requires YunoHost version 4.1.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nginx#L37" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_nginx_config">ynh_remove_nginx_config<a href="#ynh_remove_nginx_config" class="hash-link" aria-label="Lien direct vers ynh_remove_nginx_config" title="Lien direct vers ynh_remove_nginx_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the dedicated nginx config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_nginx_config</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nginx#L64" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_change_url_nginx_config">ynh_change_url_nginx_config<a href="#ynh_change_url_nginx_config" class="hash-link" aria-label="Lien direct vers ynh_change_url_nginx_config" title="Lien direct vers ynh_change_url_nginx_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Regen the nginx config in a change url context</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_change_url_nginx_config</code></p><p><strong>Details</strong>:
Requires YunoHost version 11.1.9 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/nginx#L74" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="php">PHP<a href="#php" class="hash-link" aria-label="Lien direct vers PHP" title="Lien direct vers PHP">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_add_fpm_config">ynh_add_fpm_config<a href="#ynh_add_fpm_config" class="hash-link" aria-label="Lien direct vers ynh_add_fpm_config" title="Lien direct vers ynh_add_fpm_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a dedicated PHP-FPM config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_add_fpm_config</code></p><p><strong>Details</strong>:
Case 1 (recommended) : your provided a snippet conf/extra_php-fpm.conf</p><p>The actual PHP configuration will be automatically generated,
and your extra_php-fpm.conf will be appended (typically contains PHP upload limits)</p><p>The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf</p><p>Performance-related options in the PHP conf, such as :
pm.max_children, pm.start_servers, pm.min_spare_servers pm.max_spare_servers
are computed from two parameters called &quot;usage&quot; and &quot;footprint&quot; which can be set to low/medium/high. (cf details below)</p><p>If you wish to tweak those, please initialize the settings <code>fpm_usage</code> and <code>fpm_footprint</code>
<em>prior</em> to calling this helper. Otherwise, &quot;low&quot; will be used as a default for both values.</p><p>Otherwise, if you want the user to have control over these, we encourage to create a config panel
(which should ultimately be standardized by the core ...)</p><p>Case 2 (deprecate) : you provided an entire conf/php-fpm.conf</p><p>The configuration will be hydrated, replacing <strong>FOOBAR</strong> placeholders with $foobar values, etc.</p><p>The resulting configuration will be deployed to the appropriate place, /etc/php/$phpversion/fpm/pool.d/$app.conf</p><hr><p>fpm_footprint: Memory footprint of the service (low/medium/high).
low    - Less than 20 MB of RAM by pool.
medium - Between 20 MB and 40 MB of RAM by pool.
high   - More than 40 MB of RAM by pool.
N      - Or you can specify a quantitative footprint as MB by pool (use watch -n0.5 ps -o user,cmd,%cpu,rss -u APP)</p><p>fpm_usage: Expected usage of the service (low/medium/high).
low    - Personal usage, behind the SSO.
medium - Low usage, few people or/and publicly accessible.
high   - High usage, frequently visited website.</p><p>The footprint of the service will be used to defined the maximum footprint we can allow, which is half the maximum RAM.
So it will be used to defined &#x27;pm.max_children&#x27;
A lower value for the footprint will allow more children for &#x27;pm.max_children&#x27;. And so for
&#x27;pm.start_servers&#x27;, &#x27;pm.min_spare_servers&#x27; and &#x27;pm.max_spare_servers&#x27; which are defined from the
value of &#x27;pm.max_children&#x27;
NOTE: &#x27;pm.max_children&#x27; can&#x27;t exceed 4 times the number of processor&#x27;s cores.</p><p>The usage value will defined the way php will handle the children for the pool.
A value set as &#x27;low&#x27; will set the process manager to &#x27;ondemand&#x27;. Children will start only if the
service is used, otherwise no child will stay alive. This config gives the lower footprint when the
service is idle. But will use more proc since it has to start a child as soon it&#x27;s used.
Set as &#x27;medium&#x27;, the process manager will be at dynamic. If the service is idle, a number of children
equal to pm.min_spare_servers will stay alive. So the service can be quick to answer to any request.
The number of children can grow if needed. The footprint can stay low if the service is idle, but
not null. The impact on the proc is a little bit less than &#x27;ondemand&#x27; as there&#x27;s always a few
children already available.
Set as &#x27;high&#x27;, the process manager will be set at &#x27;static&#x27;. There will be always as many children as
&#x27;pm.max_children&#x27;, the footprint is important (but will be set as maximum a quarter of the maximum
RAM) but the impact on the proc is lower. The service will be quick to answer as there&#x27;s always many
children ready to answer.</p><p>Requires YunoHost version 4.1.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/php#L88" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_fpm_config">ynh_remove_fpm_config<a href="#ynh_remove_fpm_config" class="hash-link" aria-label="Lien direct vers ynh_remove_fpm_config" title="Lien direct vers ynh_remove_fpm_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the dedicated PHP-FPM config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_fpm_config</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/php#L223" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="systemd">SYSTEMD<a href="#systemd" class="hash-link" aria-label="Lien direct vers SYSTEMD" title="Lien direct vers SYSTEMD">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_add_systemd_config">ynh_add_systemd_config<a href="#ynh_add_systemd_config" class="hash-link" aria-label="Lien direct vers ynh_add_systemd_config" title="Lien direct vers ynh_add_systemd_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a dedicated systemd config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_add_systemd_config [--service=service] [--template=template]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--service=</code>: Service name (optionnal, <code>$app</code> by default)</li>
<li><code>-t</code>, <code>--template=</code>: Name of template file (optionnal, this is &#x27;systemd&#x27; by default, meaning <code>../conf/systemd.service</code> will be used as template)</li>
</ul><p><strong>Details</strong>:
This will use the template <code>../conf/&lt;templatename&gt;.service</code>.</p><p>See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.</p><p>Requires YunoHost version 4.1.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemd#L33" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_systemd_config">ynh_remove_systemd_config<a href="#ynh_remove_systemd_config" class="hash-link" aria-label="Lien direct vers ynh_remove_systemd_config" title="Lien direct vers ynh_remove_systemd_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the dedicated systemd config</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_systemd_config [--service=service]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--service=</code>: Service name (optionnal, $app by default)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.7.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemd#L56" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_systemd_action">ynh_systemd_action<a href="#ynh_systemd_action" class="hash-link" aria-label="Lien direct vers ynh_systemd_action" title="Lien direct vers ynh_systemd_action">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Start (or other actions) a service,  print a log in case of failure and optionnaly wait until the service is completely started</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_systemd_action [--service_name=service_name] [--action=action] [ [--line_match=&quot;line to match&quot;] [--log_path=log_path] [--timeout=300] [--length=20] ]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-n</code>, <code>--service_name=</code>: Name of the service to start. Default : <code>$app</code></li>
<li><code>-a</code>, <code>--action=</code>: Action to perform with systemctl. Default: start</li>
<li><code>-l</code>, <code>--line_match=</code>: Line to match - The line to find in the log to attest the service have finished to boot. If not defined it don&#x27;t wait until the service is completely started.</li>
<li><code>-p</code>, <code>--log_path=</code>: Log file - Path to the log file. Default : <code>/var/log/$app/$app.log</code></li>
<li><code>-t</code>, <code>--timeout=</code>: Timeout - The maximum time to wait before ending the watching. Default : 300 seconds.</li>
<li><code>-e</code>, <code>--length=</code>: Length of the error log displayed for debugging : Default : 20</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemd#L85" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fail2ban">FAIL2BAN<a href="#fail2ban" class="hash-link" aria-label="Lien direct vers FAIL2BAN" title="Lien direct vers FAIL2BAN">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_add_fail2ban_config">ynh_add_fail2ban_config<a href="#ynh_add_fail2ban_config" class="hash-link" aria-label="Lien direct vers ynh_add_fail2ban_config" title="Lien direct vers ynh_add_fail2ban_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a dedicated fail2ban config (jail and filter conf files)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>1: ynh_add_fail2ban_config --logpath=log_file --failregex=filter [--max_retry=max_retry] [--ports=ports] 2: ynh_add_fail2ban_config --use_template</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-l</code>, <code>--logpath=</code>: Log file to be checked by fail2ban</li>
<li><code>-r</code>, <code>--failregex=</code>: Failregex to be looked for by fail2ban</li>
<li><code>-m</code>, <code>--max_retry=</code>: Maximum number of retries allowed before banning IP address - default: 3</li>
<li><code>-p</code>, <code>--ports=</code>: Ports blocked for a banned IP address - default: http,https</li>
<li><code>-t</code>, <code>--use_template</code>: Use this helper in template mode</li>
</ul><p><strong>Details</strong>:
This will use a template in <code>../conf/f2b_jail.conf</code> and <code>../conf/f2b_filter.conf</code>
See the documentation of <code>ynh_add_config</code> for a description of the template
format and how placeholders are replaced with actual variables.</p><p>Generally your template will look like that by example (for synapse):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">f2b_jail.conf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [__APP__]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port = http,https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter = __APP__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    logpath = /var/log/__APP__/logfile.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxretry = 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">f2b_filter.conf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [INCLUDES]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    before = common.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Part of regex definition (just used to make more easy to make the global regex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __synapse_start_line = .? \- synapse\..+ \-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Regex definition.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   failregex = ^%(__synapse_start_line)s INFO \- POST\-(\d+)\- &lt;HOST&gt; \- \d+ \- Received request\: POST /_matrix/client/r0/login\??&lt;SKIPLINES&gt;%(__synapse_start_line)s INFO \- POST\-\1\- Got login request with identifier: \{u&#x27;type&#x27;: u&#x27;m.id.user&#x27;, u&#x27;user&#x27;\: u&#x27;(.+?)&#x27;\}, medium\: None, address: None, user\: u&#x27;\5&#x27;&lt;SKIPLINES&gt;%(__synapse_start_line)s WARNING \- \- (Attempted to login as @\5\:.+ but they do not exist|Failed password login for user @\5\:.+)$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignoreregex =</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="note-about-the-failregex-option">Note about the &quot;failregex&quot; option:<a href="#note-about-the-failregex-option" class="hash-link" aria-label="Lien direct vers Note about the &quot;failregex&quot; option:" title="Lien direct vers Note about the &quot;failregex&quot; option:">​</a></h5><p>regex to match the password failure messages in the logfile. The host must be
matched by a group named &quot;<code>host</code>&quot;. The tag &quot;<code>&lt;HOST&gt;</code>&quot; can be used for standard
IP/hostname matching and is only an alias for <code>(?:::f{4,6}:)?(?P&lt;host&gt;[\w\-.^_]+)</code></p><p>You can find some more explainations about how to make a regex here :
<a href="https://www.fail2ban.org/wiki/index.php/MANUAL_0_8#Filters" target="_blank" rel="noopener noreferrer">https://www.fail2ban.org/wiki/index.php/MANUAL_0_8#Filters</a></p><p>To validate your regex you can test with this command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fail2ban-regex /var/log/YOUR_LOG_FILE_PATH /etc/fail2ban/filter.d/YOUR_APP.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Requires YunoHost version 4.1.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/fail2ban#L76" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_fail2ban_config">ynh_remove_fail2ban_config<a href="#ynh_remove_fail2ban_config" class="hash-link" aria-label="Lien direct vers ynh_remove_fail2ban_config" title="Lien direct vers ynh_remove_fail2ban_config">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the dedicated fail2ban config (jail and filter conf files)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_fail2ban_config</code></p><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/fail2ban#L148" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logrotate">LOGROTATE<a href="#logrotate" class="hash-link" aria-label="Lien direct vers LOGROTATE" title="Lien direct vers LOGROTATE">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_use_logrotate">ynh_use_logrotate<a href="#ynh_use_logrotate" class="hash-link" aria-label="Lien direct vers ynh_use_logrotate" title="Lien direct vers ynh_use_logrotate">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Use logrotate to manage the logfile</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_use_logrotate [--logfile=/log/file] [--specific_user=user/group]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-l</code>, <code>--logfile=</code>: absolute path of logfile</li>
<li><code>-u</code>, <code>--specific_user=</code>: run logrotate as the specified user and group. If not specified logrotate is runned as root.</li>
</ul><p><strong>Details</strong>:
If no <code>--logfile</code> is provided, <code>/var/log/$app</code> will be used as default.
<code>logfile</code> can point to a directory or a file.</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logrotate#L33" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_logrotate">ynh_remove_logrotate<a href="#ynh_remove_logrotate" class="hash-link" aria-label="Lien direct vers ynh_remove_logrotate" title="Lien direct vers ynh_remove_logrotate">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove the app&#x27;s logrotate config.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_logrotate</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logrotate#L113" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="misc-tools">Misc Tools<a href="#misc-tools" class="hash-link" aria-label="Lien direct vers Misc Tools" title="Lien direct vers Misc Tools">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="utils">UTILS<a href="#utils" class="hash-link" aria-label="Lien direct vers UTILS" title="Lien direct vers UTILS">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_local_curl">ynh_local_curl<a href="#ynh_local_curl" class="hash-link" aria-label="Lien direct vers ynh_local_curl" title="Lien direct vers ynh_local_curl">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Curl abstraction to help with POST requests to local pages (such as installation forms)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_local_curl &quot;page_uri&quot; &quot;key1=value1&quot; &quot;key2=value2&quot; ...</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>page_uri</code>: Path (relative to <code>$path_url</code>) of the page where POST data will be sent</li>
<li><code>key1=value1</code>: (Optionnal) POST key and corresponding value</li>
<li><code>key2=value2</code>: (Optionnal) Another POST key and corresponding value</li>
<li><code>...</code>: (Optionnal) More POST keys and values</li>
</ul><p><strong>Example</strong>: <code>ynh_local_curl &quot;/install.php?installButton&quot; &quot;foo=$var1&quot; &quot;bar=$var2&quot;</code></p><p><strong>Details</strong>:
For multiple calls, cookies are persisted between each call for the same app</p><p><code>$domain</code> and <code>$path_url</code> should be defined externally (and correspond to the domain.tld and the /path (of the app?))</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L106" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_secure_remove">ynh_secure_remove<a href="#ynh_secure_remove" class="hash-link" aria-label="Lien direct vers ynh_secure_remove" title="Lien direct vers ynh_secure_remove">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove a file or a directory securely</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_secure_remove --file=path_to_remove</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: File or directory to remove</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L188" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_read_manifest">ynh_read_manifest<a href="#ynh_read_manifest" class="hash-link" aria-label="Lien direct vers ynh_read_manifest" title="Lien direct vers ynh_read_manifest">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Read the value of a key in a ynh manifest file</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_read_manifest --manifest=&quot;manifest.json&quot; --manifest_key=&quot;key&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--manifest=</code>: Path of the manifest to read</li>
<li><code>-k</code>, <code>--manifest_key=</code>: Name of the key to find</li>
</ul><p><strong>Returns</strong>: the value associate to that key</p><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L222" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_app_upstream_version">ynh_app_upstream_version<a href="#ynh_app_upstream_version" class="hash-link" aria-label="Lien direct vers ynh_app_upstream_version" title="Lien direct vers ynh_app_upstream_version">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Read the upstream version from the manifest or <code>$YNH_APP_MANIFEST_VERSION</code></i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_app_upstream_version [--manifest=&quot;manifest.json&quot;]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--manifest=</code>: Path of the manifest to read</li>
</ul><p><strong>Returns</strong>: the version number of the upstream app</p><p><strong>Details</strong>:
If the <code>manifest</code> is not specified, the envvar <code>$YNH_APP_MANIFEST_VERSION</code> will be used.</p><p>The version number in the manifest is defined by <code>&lt;upstreamversion&gt;~ynh&lt;packageversion&gt;</code>.</p><p>For example, if the manifest contains <code>4.3-2~ynh3</code> the function will return <code>4.3-2</code></p><p>Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L262" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_check_app_version_changed">ynh_check_app_version_changed<a href="#ynh_check_app_version_changed" class="hash-link" aria-label="Lien direct vers ynh_check_app_version_changed" title="Lien direct vers ynh_check_app_version_changed">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Checks the app version to upgrade with the existing app version and returns:</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_check_app_version_changed</code></p><p><strong>Returns</strong>: <code>UPGRADE_APP</code> if the upstream version changed, <code>UPGRADE_PACKAGE</code> otherwise.</p><p><strong>Details</strong>:
This helper should be used to avoid an upgrade of an app, or the upstream part
of it, when it&#x27;s not needed</p><p>Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L314" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_compare_current_package_version">ynh_compare_current_package_version<a href="#ynh_compare_current_package_version" class="hash-link" aria-label="Lien direct vers ynh_compare_current_package_version" title="Lien direct vers ynh_compare_current_package_version">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Compare the current package version against another version given as an argument.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_compare_current_package_version --comparison (lt|le|eq|ne|ge|gt) --version &lt;X~ynhY&gt;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>--comparison</code>: Comparison type. Could be : <code>lt</code> (lower than), <code>le</code> (lower or equal), <code>eq</code> (equal), <code>ne</code> (not equal), <code>ge</code> (greater or equal), <code>gt</code> (greater than)</li>
<li><code>--version</code>: The version to compare. Need to be a version in the yunohost package version type (like <code>2.3.1~ynh4</code>)</li>
</ul><p><strong>Returns</strong>: 0 if the evaluation is true, 1 if false.</p><p><strong>Example</strong>: <code>ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1</code></p><p><strong>Details</strong>:
This helper is usually used when we need to do some actions only for some old package versions.</p><p>Generally you might probably use it as follow in the upgrade script :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if ynh_compare_current_package_version --comparison lt --version 2.3.2~ynh1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Do something that is needed for the package version older than 2.3.2~ynh1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Requires YunoHost version 3.8.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L344" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_user_exists">ynh_user_exists<a href="#ynh_user_exists" class="hash-link" aria-label="Lien direct vers ynh_user_exists" title="Lien direct vers ynh_user_exists">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a YunoHost user exists</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_user_exists --username=username</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--username=</code>: the username to check</li>
</ul><p><strong>Returns</strong>: 0 if the user exists, 1 otherwise.</p><p><strong>Example</strong>: <code>ynh_user_exists &#x27;toto&#x27; || echo &quot;User does not exist&quot;</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L421" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_user_get_info">ynh_user_get_info<a href="#ynh_user_get_info" class="hash-link" aria-label="Lien direct vers ynh_user_get_info" title="Lien direct vers ynh_user_get_info">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Retrieve a YunoHost user information</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_user_get_info --username=username --key=key</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--username=</code>: the username to retrieve info from</li>
<li><code>-k</code>, <code>--key=</code>: the key to retrieve</li>
</ul><p><strong>Returns</strong>: the value associate to that key</p><p><strong>Example</strong>: <code>mail=$(ynh_user_get_info --username=&quot;toto&quot; --key=mail)</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L442" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_user_list">ynh_user_list<a href="#ynh_user_list" class="hash-link" aria-label="Lien direct vers ynh_user_list" title="Lien direct vers ynh_user_list">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Get the list of YunoHost users</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_user_list</code></p><p><strong>Returns</strong>: one username per line as strings</p><p><strong>Example</strong>: <code>for u in $(ynh_user_list); do ... ; done</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.4.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/utils#L462" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setting">SETTING<a href="#setting" class="hash-link" aria-label="Lien direct vers SETTING" title="Lien direct vers SETTING">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_app_setting_get">ynh_app_setting_get<a href="#ynh_app_setting_get" class="hash-link" aria-label="Lien direct vers ynh_app_setting_get" title="Lien direct vers ynh_app_setting_get">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Get an application setting</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_app_setting_get --app=app --key=key</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-a</code>, <code>--app=</code>: the application id</li>
<li><code>-k</code>, <code>--key=</code>: the setting to get</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/setting#L28" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_app_setting_set">ynh_app_setting_set<a href="#ynh_app_setting_set" class="hash-link" aria-label="Lien direct vers ynh_app_setting_set" title="Lien direct vers ynh_app_setting_set">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Set an application setting</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_app_setting_set --app=app --key=key --value=value</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-a</code>, <code>--app=</code>: the application id</li>
<li><code>-k</code>, <code>--key=</code>: the setting name to set</li>
<li><code>-v</code>, <code>--value=</code>: the setting value to set</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/setting#L50" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_app_setting_set_default">ynh_app_setting_set_default<a href="#ynh_app_setting_set_default" class="hash-link" aria-label="Lien direct vers ynh_app_setting_set_default" title="Lien direct vers ynh_app_setting_set_default">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Set an application setting but only if the &quot;$key&quot; variable ain&#x27;t set yet</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_app_setting_set_default --app=app --key=key --value=value</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-a</code>, <code>--app=</code>: the application id</li>
<li><code>-k</code>, <code>--key=</code>: the setting name to set</li>
<li><code>-v</code>, <code>--value=</code>: the default setting value to set</li>
</ul><p><strong>Details</strong>:
Note that it doesn&#x27;t just define the setting but ALSO define the $foobar variable</p><p>Hence it&#x27;s meant as a replacement for this legacy overly complex syntax:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if [ -z &quot;${foo:-}&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo=&quot;bar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ynh_app_setting_set --key=&quot;foo&quot; --value=&quot;$foo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Requires YunoHost version 11.1.16 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/setting#L85" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_app_setting_delete">ynh_app_setting_delete<a href="#ynh_app_setting_delete" class="hash-link" aria-label="Lien direct vers ynh_app_setting_delete" title="Lien direct vers ynh_app_setting_delete">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Delete an application setting</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_app_setting_delete --app=app --key=key</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-a</code>, <code>--app=</code>: the application id</li>
<li><code>-k</code>, <code>--key=</code>: the setting to delete</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/setting#L110" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="string">STRING<a href="#string" class="hash-link" aria-label="Lien direct vers STRING" title="Lien direct vers STRING">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_string_random">ynh_string_random<a href="#ynh_string_random" class="hash-link" aria-label="Lien direct vers ynh_string_random" title="Lien direct vers ynh_string_random">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Generate a random string</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_string_random [--length=string_length]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-l</code>, <code>--length=</code>: the string length to generate (default: 24)</li>
<li><code>-f</code>, <code>--filter=</code>: the kind of characters accepted in the output (default: &#x27;A-Za-z0-9&#x27;)</li>
</ul><p><strong>Returns</strong>: the generated string</p><p><strong>Example</strong>: <code>pwd=$(ynh_string_random --length=8)</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/string#L31" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_replace_string">ynh_replace_string<a href="#ynh_replace_string" class="hash-link" aria-label="Lien direct vers ynh_replace_string" title="Lien direct vers ynh_replace_string">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Substitute/replace a string (or expression) by another in a file</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_replace_string --match_string=match_string --replace_string=replace_string --target_file=target_file</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--match_string=</code>: String to be searched and replaced in the file</li>
<li><code>-r</code>, <code>--replace_string=</code>: String that will replace matches</li>
<li><code>-f</code>, <code>--target_file=</code>: File in which the string will be replaced.</li>
</ul><p><strong>Details</strong>:
As this helper is based on sed command, regular expressions and references to
sub-expressions can be used (see sed manual page for more information)</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/string#L58" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_replace_special_string">ynh_replace_special_string<a href="#ynh_replace_special_string" class="hash-link" aria-label="Lien direct vers ynh_replace_special_string" title="Lien direct vers ynh_replace_special_string">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Substitute/replace a special string by another in a file</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_replace_special_string --match_string=match_string --replace_string=replace_string --target_file=target_file</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--match_string=</code>: String to be searched and replaced in the file</li>
<li><code>-r</code>, <code>--replace_string=</code>: String that will replace matches</li>
<li><code>-t</code>, <code>--target_file=</code>: File in which the string will be replaced.</li>
</ul><p><strong>Details</strong>:
This helper will use ynh_replace_string, but as you can use special
characters, you can&#x27;t use some regular expressions and sub-expressions.</p><p>Requires YunoHost version 2.7.7 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/string#L89" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="backup">BACKUP<a href="#backup" class="hash-link" aria-label="Lien direct vers BACKUP" title="Lien direct vers BACKUP">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_backup">ynh_backup<a href="#ynh_backup" class="hash-link" aria-label="Lien direct vers ynh_backup" title="Lien direct vers ynh_backup">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Add a file or a directory to the list of paths to backup</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_backup --src_path=src_path [--dest_path=dest_path] [--is_big] [--not_mandatory]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--src_path=</code>: file or directory to bind or symlink or copy. it shouldn&#x27;t be in the backup dir.</li>
<li><code>-d</code>, <code>--dest_path=</code>: destination file or directory inside the backup dir</li>
<li><code>-b</code>, <code>--is_big</code>: Indicate data are big (mail, video, image ...)</li>
<li><code>-m</code>, <code>--not_mandatory</code>: Indicate that if the file is missing, the backup can ignore it.</li>
</ul><p><strong>Details</strong>:
This helper can be used both in a system backup hook, and in an app backup script</p><p><code>ynh_backup</code> writes <code>src_path</code> and the relative <code>dest_path</code> into a CSV file, and it
creates the parent destination directory</p><p>If <code>dest_path</code> is ended by a slash it complete this path with the basename of <code>src_path</code>.</p><p>Example in the context of a wordpress app :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; This line will be added into CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/etc/nginx/conf.d/$domain.d/$app.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf/nginx.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/nginx.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/$app.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Deprecated usages (maintained for retro-compatibility)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;${backup_dir}/conf/nginx.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/nginx.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ynh_backup &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot; &quot;/conf/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =&gt; &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;,&quot;apps/wordpress/conf/$app.conf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>How to use <code>--is_big</code>:</p><p><code>--is_big</code> is used to specify that this part of the backup can be quite huge.
So, you don&#x27;t want that your package does backup that part during ynh_backup_before_upgrade.
In the same way, an user may doesn&#x27;t want to backup this big part of the app for
each of his backup. And so handle that part differently.</p><p>As this part of your backup may not be done, your restore script has to handle it.
In your restore script, use <code>--not_mandatory</code> with <code>ynh_restore_file</code>
As well in your remove script, you should not remove those data ! Or an user may end up with
a failed upgrade restoring an app without data anymore !</p><p>To have the benefit of <code>--is_big</code> while doing a backup, you can whether set the environement
variable <code>BACKUP_CORE_ONLY</code> to 1 (<code>BACKUP_CORE_ONLY=1</code>) before the backup command. It will affect
only that backup command.
Or set the config <code>do_not_backup_data</code> to 1 into the <code>settings.yml</code> of the app. This will affect
all backups for this app until the setting is removed.</p><p>Requires YunoHost version 2.4.0 or higher.
Requires YunoHost version 3.5.0 or higher for the argument <code>--not_mandatory</code></p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L82" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_restore">ynh_restore<a href="#ynh_restore" class="hash-link" aria-label="Lien direct vers ynh_restore" title="Lien direct vers ynh_restore">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Restore all files that were previously backuped in a core backup script or app backup script</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_restore</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L197" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_restore_file">ynh_restore_file<a href="#ynh_restore_file" class="hash-link" aria-label="Lien direct vers ynh_restore_file" title="Lien direct vers ynh_restore_file">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Restore a file or a directory</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_restore_file --origin_path=origin_path [--dest_path=dest_path] [--not_mandatory]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-o</code>, <code>--origin_path=</code>: Path where was located the file or the directory before to be backuped or relative path to $YNH_CWD where it is located in the backup archive</li>
<li><code>-d</code>, <code>--dest_path=</code>: Path where restore the file or the dir. If unspecified, the destination will be <code>ORIGIN_PATH</code> or if the <code>ORIGIN_PATH</code> doesn&#x27;t exist in the archive, the destination will be searched into <code>backup.csv</code></li>
<li><code>-m</code>, <code>--not_mandatory</code>: Indicate that if the file is missing, the restore process can ignore it.</li>
</ul><p><strong>Examples</strong>:</p><ul>
<li><code>ynh_restore_file -o &quot;/etc/nginx/conf.d/$domain.d/$app.conf&quot;</code></li>
<li><code>You can also use relative paths:</code></li>
<li><code>ynh_restore_file -o &quot;conf/nginx.conf&quot;</code></li>
</ul><p><strong>Details</strong>:
Use the registered path in backup_list by ynh_backup to restore the file at the right place.</p><p>If <code>DEST_PATH</code> already exists and is lighter than 500 Mo, a backup will be made in
<code>/var/cache/yunohost/appconfbackup/</code>. Otherwise, the existing file is removed.</p><p>if <code>apps/$app/etc/nginx/conf.d/$domain.d/$app.conf</code> exists, restore it into
<code>/etc/nginx/conf.d/$domain.d/$app.conf</code>
if no, search for a match in the csv (eg: conf/nginx.conf) and restore it into
<code>/etc/nginx/conf.d/$domain.d/$app.conf</code></p><p>Requires YunoHost version 2.6.4 or higher.
Requires YunoHost version 3.5.0 or higher for the argument --not_mandatory</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L256" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_store_file_checksum">ynh_store_file_checksum<a href="#ynh_store_file_checksum" class="hash-link" aria-label="Lien direct vers ynh_store_file_checksum" title="Lien direct vers ynh_store_file_checksum">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Calculate and store a file checksum into the app settings</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_store_file_checksum --file=file</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: The file on which the checksum will performed, then stored.</li>
</ul><p><strong>Details</strong>:
$app should be defined when calling this helper</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L323" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_backup_if_checksum_is_different">ynh_backup_if_checksum_is_different<a href="#ynh_backup_if_checksum_is_different" class="hash-link" aria-label="Lien direct vers ynh_backup_if_checksum_is_different" title="Lien direct vers ynh_backup_if_checksum_is_different">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Verify the checksum and backup the file if it&#x27;s different</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_backup_if_checksum_is_different --file=file</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: The file on which the checksum test will be perfomed.</li>
</ul><p><strong>Returns</strong>: the name of a backup file, or nothing</p><p><strong>Details</strong>:
This helper is primarily meant to allow to easily backup personalised/manually
modified config files.</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L374" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_delete_file_checksum">ynh_delete_file_checksum<a href="#ynh_delete_file_checksum" class="hash-link" aria-label="Lien direct vers ynh_delete_file_checksum" title="Lien direct vers ynh_delete_file_checksum">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Delete a file checksum from the app settings</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_delete_file_checksum --file=file</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-f</code>, <code>--file=</code>: The file for which the checksum will be deleted</li>
</ul><p><strong>Details</strong>:
$app should be defined when calling this helper</p><p>Requires YunoHost version 3.3.1 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/backup#L413" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logging">LOGGING<a href="#logging" class="hash-link" aria-label="Lien direct vers LOGGING" title="Lien direct vers LOGGING">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_die">ynh_die<a href="#ynh_die" class="hash-link" aria-label="Lien direct vers ynh_die" title="Lien direct vers ynh_die">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Print a message to stderr and exit</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_die --message=MSG [--ret_code=RETCODE]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--message=</code>: Message to display</li>
<li><code>-c</code>, <code>--ret_code=</code>: Exit code to exit with</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.4.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L28" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_print_info">ynh_print_info<a href="#ynh_print_info" class="hash-link" aria-label="Lien direct vers ynh_print_info" title="Lien direct vers ynh_print_info">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Display a message in the &#x27;INFO&#x27; logging category</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_print_info --message=&quot;Some message&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--message=</code>: Message to display</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L48" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_print_warn">ynh_print_warn<a href="#ynh_print_warn" class="hash-link" aria-label="Lien direct vers ynh_print_warn" title="Lien direct vers ynh_print_warn">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Print a warning on stderr</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_print_warn --message=&quot;Text to print&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--message=</code>: The text to print</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L74" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_print_err">ynh_print_err<a href="#ynh_print_err" class="hash-link" aria-label="Lien direct vers ynh_print_err" title="Lien direct vers ynh_print_err">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Print an error on stderr</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_print_err --message=&quot;Text to print&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--message=</code>: The text to print</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L91" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_err">ynh_exec_err<a href="#ynh_exec_err" class="hash-link" aria-label="Lien direct vers ynh_exec_err" title="Lien direct vers ynh_exec_err">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and print the result as an error</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_err your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_err</p><p>Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L110" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_warn">ynh_exec_warn<a href="#ynh_exec_warn" class="hash-link" aria-label="Lien direct vers ynh_exec_warn" title="Lien direct vers ynh_exec_warn">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and print the result as a warning</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_warn your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn</p><p>Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L130" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_warn_less">ynh_exec_warn_less<a href="#ynh_exec_warn_less" class="hash-link" aria-label="Lien direct vers ynh_exec_warn_less" title="Lien direct vers ynh_exec_warn_less">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and force the result to be printed on stdout</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_warn_less your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn</p><p>Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L150" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_quiet">ynh_exec_quiet<a href="#ynh_exec_quiet" class="hash-link" aria-label="Lien direct vers ynh_exec_quiet" title="Lien direct vers ynh_exec_quiet">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and redirect stdout in /dev/null</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_quiet your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_warn</p><p>Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L170" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_fully_quiet">ynh_exec_fully_quiet<a href="#ynh_exec_fully_quiet" class="hash-link" aria-label="Lien direct vers ynh_exec_fully_quiet" title="Lien direct vers ynh_exec_fully_quiet">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and redirect stdout and stderr in /dev/null</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_quiet your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_quiet</p><p>Requires YunoHost version 3.2.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L190" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_and_print_stderr_only_if_error">ynh_exec_and_print_stderr_only_if_error<a href="#ynh_exec_and_print_stderr_only_if_error" class="hash-link" aria-label="Lien direct vers ynh_exec_and_print_stderr_only_if_error" title="Lien direct vers ynh_exec_and_print_stderr_only_if_error">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command and redirect stderr in /dev/null. Print stderr on error.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_and_print_stderr_only_if_error your command and args</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>command</code>: command to execute</li>
</ul><p><strong>Details</strong>:
Note that you should NOT quote the command but only prefix it with ynh_exec_and_print_stderr_only_if_error</p><p>Requires YunoHost version 11.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L210" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_script_progression">ynh_script_progression<a href="#ynh_script_progression" class="hash-link" aria-label="Lien direct vers ynh_script_progression" title="Lien direct vers ynh_script_progression">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Print a progress bar showing the progression of an app script</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_script_progression --message=message [--weight=weight] [--time]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-m</code>, <code>--message=</code>: The text to print</li>
<li><code>-w</code>, <code>--weight=</code>: The weight for this progression. This value is 1 by default. Use a bigger value for a longer part of the script.</li>
<li><code>-t</code>, <code>--time</code>: Print the execution time since the last call to this helper. Especially usefull to define weights. The execution time is given for the duration since the previous call. So the weight should be applied to this previous call.</li>
<li><code>-l</code>, <code>--last</code>: Use for the last call of the helper, to fill the progression bar.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.5.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L270" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_return">ynh_return<a href="#ynh_return" class="hash-link" aria-label="Lien direct vers ynh_return" title="Lien direct vers ynh_return">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Return data to the YunoHost core for later processing
(to be used by special hooks like app config panel and core diagnosis)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_return somedata</code></p><p><strong>Details</strong>:
Requires YunoHost version 3.6.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/logging#L358" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multimedia">MULTIMEDIA<a href="#multimedia" class="hash-link" aria-label="Lien direct vers MULTIMEDIA" title="Lien direct vers MULTIMEDIA">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_multimedia_build_main_dir">ynh_multimedia_build_main_dir<a href="#ynh_multimedia_build_main_dir" class="hash-link" aria-label="Lien direct vers ynh_multimedia_build_main_dir" title="Lien direct vers ynh_multimedia_build_main_dir">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Initialize the multimedia directory system</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_multimedia_build_main_dir</code></p><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/multimedia#L29" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_multimedia_addfolder">ynh_multimedia_addfolder<a href="#ynh_multimedia_addfolder" class="hash-link" aria-label="Lien direct vers ynh_multimedia_addfolder" title="Lien direct vers ynh_multimedia_addfolder">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Add a directory in yunohost.multimedia</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_multimedia_addfolder --source_dir=&quot;source_dir&quot; --dest_dir=&quot;dest_dir&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-s</code>, <code>--source_dir=</code>: Source directory - The real directory which contains your medias.</li>
<li><code>-d</code>, <code>--dest_dir=</code>: Destination directory - The name and the place of the symbolic link, relative to &quot;/home/yunohost.multimedia&quot;</li>
</ul><p><strong>Details</strong>:
This &quot;directory&quot; will be a symbolic link to a existing directory.</p><p>Requires YunoHost version 4.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/multimedia#L82" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_multimedia_addaccess">ynh_multimedia_addaccess<a href="#ynh_multimedia_addaccess" class="hash-link" aria-label="Lien direct vers ynh_multimedia_addaccess" title="Lien direct vers ynh_multimedia_addaccess">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Allow an user to have an write authorisation in multimedia directories</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_multimedia_addaccess user_name</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--user_name=</code>: The name of the user which gain this access.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 4.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/multimedia#L111" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deprecated-or-handled-by-the-core--app-resources-since-v2">Deprecated Or Handled By The Core / App Resources Since V2<a href="#deprecated-or-handled-by-the-core--app-resources-since-v2" class="hash-link" aria-label="Lien direct vers Deprecated Or Handled By The Core / App Resources Since V2" title="Lien direct vers Deprecated Or Handled By The Core / App Resources Since V2">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="permission">PERMISSION<a href="#permission" class="hash-link" aria-label="Lien direct vers PERMISSION" title="Lien direct vers PERMISSION">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_create">ynh_permission_create<a href="#ynh_permission_create" class="hash-link" aria-label="Lien direct vers ynh_permission_create" title="Lien direct vers ynh_permission_create">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a new permission for the app</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_create --permission=&quot;permission&quot; [--url=&quot;url&quot;] [--additional_urls=&quot;second-url&quot; [ &quot;third-url&quot; ]] [--auth_header=true|false]                                                        [--allowed=group1 [ group2 ]] [--show_tile=true|false]                                                        [--protected=true|false]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named &quot;main&quot; already exist)</li>
<li><code>-u</code>, <code>--url=</code>: (optional) URL for which access will be allowed/forbidden. Note that if &#x27;show_tile&#x27; is enabled, this URL will be the URL of the tile.</li>
<li><code>-A</code>, <code>--additional_urls=</code>: (optional) List of additional URL for which access will be allowed/forbidden</li>
<li><code>-h</code>, <code>--auth_header=</code>: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application. Default is true</li>
<li><code>-a</code>, <code>--allowed=</code>: (optional) A list of group/user to allow for the permission</li>
<li><code>-t</code>, <code>--show_tile=</code>: (optional) Define if a tile will be shown in the SSO. If yes the name of the tile will be the &#x27;label&#x27; parameter. Defaults to false for the permission different than &#x27;main&#x27;.</li>
<li><code>-P</code>, <code>--protected=</code>: (optional) Define if this permission is protected. If it is protected the administrator won&#x27;t be able to add or remove the visitors group of this permission. Defaults to &#x27;false&#x27;.</li>
</ul><p><strong>Details</strong>:
Example 1: <code>ynh_permission_create --permission=admin --url=/admin --additional_urls=domain.tld/admin /superadmin --allowed=alice bob \                                  --show_tile=true</code></p><p>This example will create a new permission permission with this following effect:</p><ul>
<li>A tile named &quot;My app admin&quot; in the SSO will be available for the users alice and bob. This tile will point to the relative url &#x27;/admin&#x27;.</li>
<li>Only the user alice and bob will have the access to theses following url: /admin, domain.tld/admin, /superadmin</li>
</ul><p>Example 2:</p><p>ynh_permission_create --permission=api --url=domain.tld/api --auth_header=false --allowed=visitors <br>
<!-- -->--protected=true</p><p>This example will create a new protected permission. So the admin won&#x27;t be able to add/remove the visitors group of this permission.
In case of an API with need to be always public it avoid that the admin break anything.
With this permission all client will be allowed to access to the url &#x27;domain.tld/api&#x27;.
Note that in this case no tile will be show on the SSO.
Note that the auth_header parameter is to &#x27;false&#x27;. So no authentication header will be passed to the application.
Generally the API is requested by an application and enabling the auth_header has no advantage and could bring some issues in some case.
So in this case it&#x27;s better to disable this option for all API.</p><p>If provided, &#x27;url&#x27; or &#x27;additional_urls&#x27; is assumed to be relative to the app domain/path if they
start with &#x27;/&#x27;.  For example:
/                             -&gt; domain.tld/app
/admin                        -&gt; domain.tld/app/admin
domain.tld/app/api            -&gt; domain.tld/app/api</p><p>&#x27;url&#x27; or &#x27;additional_urls&#x27; can be treated as a PCRE (not lua) regex if it starts with &quot;re:&quot;.
For example:
re:/api/[A-Z]<em>$               -&gt; domain.tld/app/api/[A-Z]</em>$
re<!-- -->:domain<!-- -->.tld/app/api/[A-Z]<em>$ -&gt; domain.tld/app/api/[A-Z]</em>$</p><p>Note that globally the parameter &#x27;url&#x27; and &#x27;additional_urls&#x27; are same. The only difference is:</p><ul>
<li>&#x27;url&#x27; is only one url, &#x27;additional_urls&#x27; can be a list of urls. There are no limitation of &#x27;additional_urls&#x27;</li>
<li>&#x27;url&#x27; is used for the url of tile in the SSO (if enabled with the &#x27;show_tile&#x27; parameter)</li>
</ul><p>About the authentication header (auth_header parameter).
The SSO pass (by default) to the application theses following HTTP header (linked to the authenticated user) to the application:</p><ul>
<li>&quot;Auth-User&quot;: username</li>
<li>&quot;Remote-User&quot;: username</li>
<li>&quot;Email&quot;: user email</li>
</ul><p>Generally this feature is usefull to authenticate automatically the user in the application but in some case the application don&#x27;t work with theses header and theses header need to be disabled to have the application to work correctly.
See <a href="https://github.com/YunoHost/issues/issues/1420" target="_blank" rel="noopener noreferrer">https://github.com/YunoHost/issues/issues/1420</a> for more informations</p><p>Requires YunoHost version 3.7.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L83" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_delete">ynh_permission_delete<a href="#ynh_permission_delete" class="hash-link" aria-label="Lien direct vers ynh_permission_delete" title="Lien direct vers ynh_permission_delete">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove a permission for the app (note that when the app is removed all permission is automatically removed)</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_delete --permission=&quot;permission&quot;</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed)</li>
</ul><p><strong>Example</strong>: <code>ynh_permission_delete --permission=editors</code></p><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L161" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_exists">ynh_permission_exists<a href="#ynh_permission_exists" class="hash-link" aria-label="Lien direct vers ynh_permission_exists" title="Lien direct vers ynh_permission_exists">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a permission exists</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_exists --permission=permission | exit: Return 1 if the permission doesn&#x27;t exist, 0 otherwise</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the permission to check</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L178" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_url">ynh_permission_url<a href="#ynh_permission_url" class="hash-link" aria-label="Lien direct vers ynh_permission_url" title="Lien direct vers ynh_permission_url">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Redefine the url associated to a permission</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_url --permission &quot;permission&quot; [--url=&quot;url&quot;] [--add_url=&quot;new-url&quot; [ &quot;other-new-url&quot; ]] [--remove_url=&quot;old-url&quot; [ &quot;other-old-url&quot; ]]                                                     [--auth_header=true|false] [--clear_urls]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named &quot;main&quot; is removed automatically when the app is removed)</li>
<li><code>-u</code>, <code>--url=</code>: (optional) URL for which access will be allowed/forbidden. Note that if you want to remove url you can pass an empty sting as arguments (&quot;&quot;).</li>
<li><code>-a</code>, <code>--add_url=</code>: (optional) List of additional url to add for which access will be allowed/forbidden.</li>
<li><code>-r</code>, <code>--remove_url=</code>: (optional) List of additional url to remove for which access will be allowed/forbidden</li>
<li><code>-h</code>, <code>--auth_header=</code>: (optional) Define for the URL of this permission, if SSOwat pass the authentication header to the application</li>
<li><code>-c</code>, <code>--clear_urls</code>: (optional) Clean all urls (url and additional_urls)</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L201" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_update">ynh_permission_update<a href="#ynh_permission_update" class="hash-link" aria-label="Lien direct vers ynh_permission_update" title="Lien direct vers ynh_permission_update">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Update a permission for the app</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_update --permission &quot;permission&quot; [--add=&quot;group&quot; [&quot;group&quot; ...]] [--remove=&quot;group&quot; [&quot;group&quot; ...]]                                                        [--show_tile=true|false] [--protected=true|false]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the name for the permission (by default a permission named &quot;main&quot; already exist)</li>
<li><code>-a</code>, <code>--add=</code>: the list of group or users to enable add to the permission</li>
<li><code>-r</code>, <code>--remove=</code>: the list of group or users to remove from the permission</li>
<li><code>-t</code>, <code>--show_tile=</code>: (optional) Define if a tile will be shown in the SSO</li>
<li><code>-P</code>, <code>--protected=</code>: (optional) Define if this permission is protected. If it is protected the administrator won&#x27;t be able to add or remove the visitors group of this permission.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.7.0 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L268" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_permission_has_user">ynh_permission_has_user<a href="#ynh_permission_has_user" class="hash-link" aria-label="Lien direct vers ynh_permission_has_user" title="Lien direct vers ynh_permission_has_user">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a permission has an user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_permission_has_user --permission=permission --user=user | exit: Return 1 if the permission doesn&#x27;t have that user or doesn&#x27;t exist, 0 otherwise</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--permission=</code>: the permission to check</li>
<li><code>-u</code>, <code>--user=</code>: the user seek in the permission</li>
</ul><p><strong>Example</strong>: <code>ynh_permission_has_user --permission=main --user=visitors</code></p><p><strong>Details</strong>:
Requires YunoHost version 3.7.1 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L331" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_legacy_permissions_exists">ynh_legacy_permissions_exists<a href="#ynh_legacy_permissions_exists" class="hash-link" aria-label="Lien direct vers ynh_legacy_permissions_exists" title="Lien direct vers ynh_legacy_permissions_exists">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check if a legacy permissions exist</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_legacy_permissions_exists | exit: Return 1 if the permission doesn&#x27;t exist, 0 otherwise</code></p><p><strong>Details</strong>:
Requires YunoHost version 4.1.2 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L361" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_legacy_permissions_delete_all">ynh_legacy_permissions_delete_all<a href="#ynh_legacy_permissions_delete_all" class="hash-link" aria-label="Lien direct vers ynh_legacy_permissions_delete_all" title="Lien direct vers ynh_legacy_permissions_delete_all">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove all legacy permissions</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_legacy_permissions_delete_all</code></p><p><strong>Example</strong>: <code>if ynh_legacy_permissions_exists then ynh_legacy_permissions_delete_all # You can recreate the required permissions here with ynh_permission_create fi Requires YunoHost version 4.1.2 or higher.</code></p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/permission#L381" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apt">APT<a href="#apt" class="hash-link" aria-label="Lien direct vers APT" title="Lien direct vers APT">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_package_is_installed">ynh_package_is_installed<a href="#ynh_package_is_installed" class="hash-link" aria-label="Lien direct vers ynh_package_is_installed" title="Lien direct vers ynh_package_is_installed">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Check either a package is installed or not</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_package_is_installed --package=name</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-p</code>, <code>--package=</code>: the package name to check</li>
</ul><p><strong>Returns</strong>: 0 if the package is installed, 1 else.</p><p><strong>Example</strong>: <code>ynh_package_is_installed --package=yunohost &amp;&amp; echo &quot;installed&quot;</code></p><p><strong>Details</strong>:
Requires YunoHost version 2.2.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/apt#L71" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_app_dependencies">ynh_install_app_dependencies<a href="#ynh_install_app_dependencies" class="hash-link" aria-label="Lien direct vers ynh_install_app_dependencies" title="Lien direct vers ynh_install_app_dependencies">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Define and install dependencies with a equivs control file</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_app_dependencies dep [dep [...]]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>dep</code>: the package name to install in dependence.</li>
<li><code>&quot;dep1|dep2|…&quot;</code>: You can specify alternatives. It will require to install (dep1 or dep2, etc).</li>
</ul><p><strong>Details</strong>:
This helper can/should only be called once per app</p><p>example : ynh_install_app_dependencies dep1 dep2 &quot;dep3|dep4|dep5&quot;</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/apt#L257" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_remove_app_dependencies">ynh_remove_app_dependencies<a href="#ynh_remove_app_dependencies" class="hash-link" aria-label="Lien direct vers ynh_remove_app_dependencies" title="Lien direct vers ynh_remove_app_dependencies">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Remove fake package and its dependencies</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_remove_app_dependencies</code></p><p><strong>Details</strong>:
Dependencies will removed only if no other package need them.</p><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/apt#L386" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_install_extra_app_dependencies">ynh_install_extra_app_dependencies<a href="#ynh_install_extra_app_dependencies" class="hash-link" aria-label="Lien direct vers ynh_install_extra_app_dependencies" title="Lien direct vers ynh_install_extra_app_dependencies">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Install packages from an extra repository properly.</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_install_extra_app_dependencies --repo=&quot;repo&quot; --package=&quot;dep1 dep2&quot; [--key=key_url] [--name=name]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-r</code>, <code>--repo=</code>: Complete url of the extra repository.</li>
<li><code>-p</code>, <code>--package=</code>: The packages to install from this extra repository</li>
<li><code>-k</code>, <code>--key=</code>: url to get the public key.</li>
<li><code>-n</code>, <code>--name=</code>: Name for the files for this repo, $app as default value.</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 3.8.1 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/apt#L418" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="systemuser">SYSTEMUSER<a href="#systemuser" class="hash-link" aria-label="Lien direct vers SYSTEMUSER" title="Lien direct vers SYSTEMUSER">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_system_user_create">ynh_system_user_create<a href="#ynh_system_user_create" class="hash-link" aria-label="Lien direct vers ynh_system_user_create" title="Lien direct vers ynh_system_user_create">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Create a system user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_system_user_create --username=user_name [--home_dir=home_dir] [--use_shell] [--groups=&quot;group1 group2&quot;]</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--username=</code>: Name of the system user that will be create</li>
<li><code>-h</code>, <code>--home_dir=</code>: Path of the home dir for the user. Usually the final path of the app. If this argument is omitted, the user will be created without home</li>
<li><code>-s</code>, <code>--use_shell</code>: Create a user using the default login shell if present. If this argument is omitted, the user will be created with /usr/sbin/nologin shell</li>
<li><code>-g</code>, <code>--groups</code>: Add the user to system groups. Typically meant to add the user to the ssh.app / sftp.app group (e.g. for borgserver, my_webapp)</li>
</ul><p><strong>Details</strong>:
Create a nextcloud user with no home directory and /usr/sbin/nologin login shell (hence no login capability) :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ynh_system_user_create --username=nextcloud</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a discourse user using /var/www/discourse as home directory and the default login shell :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ynh_system_user_create --username=discourse --home_dir=/var/www/discourse --use_shell</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemuser#L79" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_system_user_delete">ynh_system_user_delete<a href="#ynh_system_user_delete" class="hash-link" aria-label="Lien direct vers ynh_system_user_delete" title="Lien direct vers ynh_system_user_delete">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Delete a system user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_system_user_delete --username=user_name</code></p><p><strong>Arguments</strong>:</p><ul>
<li><code>-u</code>, <code>--username=</code>: Name of the system user that will be create</li>
</ul><p><strong>Details</strong>:
Requires YunoHost version 2.6.4 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemuser#L121" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ynh_exec_as">ynh_exec_as<a href="#ynh_exec_as" class="hash-link" aria-label="Lien direct vers ynh_exec_as" title="Lien direct vers ynh_exec_as">​</a></h4>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><i>Execute a command as another user</i></summary><div><div class="collapsibleContent_i85q"><p><strong>Usage</strong>: <code>ynh_exec_as $USER COMMAND [ARG ...]</code></p><p><strong>Details</strong>:
Requires YunoHost version 4.1.7 or higher.</p><p><a href="https://github.com/YunoHost/yunohost/blob/77f7135f4e595416731d7a5a1b7fbb954c805612/helpers/helpers.v1.d/systemuser#L147" target="_blank" rel="noopener noreferrer">Dude, show me the code!</a></p></div></div></details>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/YunoHost/doc/tree/docusaurus/docs/06.contribute/10.packaging_apps/20.scripts/20.packaging_app_scripts_helpers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pages de documentation"><a class="pagination-nav__link pagination-nav__link--prev" href="/contribute/packaging_apps/scripts/shell_variables_scope"><div class="pagination-nav__sublabel">Précédent</div><div class="pagination-nav__label">General scope of variables</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contribute/packaging_apps/scripts/packaging_app_scripts_helpers_v21"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">App helpers (v2.1)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sources" class="table-of-contents__link toc-highlight">Sources</a><ul><li><a href="#sources-1" class="table-of-contents__link toc-highlight">SOURCES</a><ul><li><a href="#ynh_setup_source" class="table-of-contents__link toc-highlight">ynh_setup_source</a></li></ul></li></ul></li><li><a href="#app-technologies" class="table-of-contents__link toc-highlight">App Technologies</a><ul><li><a href="#nodejs" class="table-of-contents__link toc-highlight">NODEJS</a><ul><li><a href="#ynh_use_nodejs" class="table-of-contents__link toc-highlight">ynh_use_nodejs</a></li><li><a href="#ynh_install_nodejs" class="table-of-contents__link toc-highlight">ynh_install_nodejs</a></li><li><a href="#ynh_remove_nodejs" class="table-of-contents__link toc-highlight">ynh_remove_nodejs</a></li></ul></li><li><a href="#ruby" class="table-of-contents__link toc-highlight">RUBY</a><ul><li><a href="#ynh_use_ruby" class="table-of-contents__link toc-highlight">ynh_use_ruby</a></li><li><a href="#ynh_install_ruby" class="table-of-contents__link toc-highlight">ynh_install_ruby</a></li><li><a href="#ynh_remove_ruby" class="table-of-contents__link toc-highlight">ynh_remove_ruby</a></li><li><a href="#ynh_cleanup_ruby" class="table-of-contents__link toc-highlight">ynh_cleanup_ruby</a></li></ul></li><li><a href="#go" class="table-of-contents__link toc-highlight">GO</a><ul><li><a href="#ynh_use_go" class="table-of-contents__link toc-highlight">ynh_use_go</a></li><li><a href="#ynh_install_go" class="table-of-contents__link toc-highlight">ynh_install_go</a></li><li><a href="#ynh_remove_go" class="table-of-contents__link toc-highlight">ynh_remove_go</a></li><li><a href="#ynh_cleanup_go" class="table-of-contents__link toc-highlight">ynh_cleanup_go</a></li></ul></li><li><a href="#composer" class="table-of-contents__link toc-highlight">COMPOSER</a><ul><li><a href="#ynh_composer_exec" class="table-of-contents__link toc-highlight">ynh_composer_exec</a></li><li><a href="#ynh_install_composer" class="table-of-contents__link toc-highlight">ynh_install_composer</a></li></ul></li></ul></li><li><a href="#databases" class="table-of-contents__link toc-highlight">Databases</a><ul><li><a href="#mysql" class="table-of-contents__link toc-highlight">MYSQL</a><ul><li><a href="#ynh_mysql_connect_as" class="table-of-contents__link toc-highlight">ynh_mysql_connect_as</a></li><li><a href="#ynh_mysql_execute_as_root" class="table-of-contents__link toc-highlight">ynh_mysql_execute_as_root</a></li><li><a href="#ynh_mysql_execute_file_as_root" class="table-of-contents__link toc-highlight">ynh_mysql_execute_file_as_root</a></li><li><a href="#ynh_mysql_dump_db" class="table-of-contents__link toc-highlight">ynh_mysql_dump_db</a></li></ul></li><li><a href="#postgresql" class="table-of-contents__link toc-highlight">POSTGRESQL</a><ul><li><a href="#ynh_psql_connect_as" class="table-of-contents__link toc-highlight">ynh_psql_connect_as</a></li><li><a href="#ynh_psql_execute_as_root" class="table-of-contents__link toc-highlight">ynh_psql_execute_as_root</a></li><li><a href="#ynh_psql_execute_file_as_root" class="table-of-contents__link toc-highlight">ynh_psql_execute_file_as_root</a></li><li><a href="#ynh_psql_dump_db" class="table-of-contents__link toc-highlight">ynh_psql_dump_db</a></li><li><a href="#ynh_psql_database_exists" class="table-of-contents__link toc-highlight">ynh_psql_database_exists</a></li></ul></li><li><a href="#mongodb" class="table-of-contents__link toc-highlight">MONGODB</a><ul><li><a href="#ynh_mongo_exec" class="table-of-contents__link toc-highlight">ynh_mongo_exec</a></li><li><a href="#ynh_mongo_dump_db" class="table-of-contents__link toc-highlight">ynh_mongo_dump_db</a></li><li><a href="#ynh_mongo_database_exists" class="table-of-contents__link toc-highlight">ynh_mongo_database_exists</a></li><li><a href="#ynh_mongo_restore_db" class="table-of-contents__link toc-highlight">ynh_mongo_restore_db</a></li><li><a href="#ynh_mongo_setup_db" class="table-of-contents__link toc-highlight">ynh_mongo_setup_db</a></li><li><a href="#ynh_mongo_remove_db" class="table-of-contents__link toc-highlight">ynh_mongo_remove_db</a></li><li><a href="#ynh_install_mongo" class="table-of-contents__link toc-highlight">ynh_install_mongo</a></li><li><a href="#ynh_remove_mongo" class="table-of-contents__link toc-highlight">ynh_remove_mongo</a></li></ul></li><li><a href="#redis" class="table-of-contents__link toc-highlight">REDIS</a><ul><li><a href="#ynh_redis_get_free_db" class="table-of-contents__link toc-highlight">ynh_redis_get_free_db</a></li><li><a href="#ynh_redis_remove_db" class="table-of-contents__link toc-highlight">ynh_redis_remove_db</a></li></ul></li></ul></li><li><a href="#configurations--templating" class="table-of-contents__link toc-highlight">Configurations / Templating</a><ul><li><a href="#templating" class="table-of-contents__link toc-highlight">TEMPLATING</a><ul><li><a href="#ynh_add_config" class="table-of-contents__link toc-highlight">ynh_add_config</a></li><li><a href="#ynh_read_var_in_file" class="table-of-contents__link toc-highlight">ynh_read_var_in_file</a></li><li><a href="#ynh_write_var_in_file" class="table-of-contents__link toc-highlight">ynh_write_var_in_file</a></li></ul></li><li><a href="#nginx" class="table-of-contents__link toc-highlight">NGINX</a><ul><li><a href="#ynh_add_nginx_config" class="table-of-contents__link toc-highlight">ynh_add_nginx_config</a></li><li><a href="#ynh_remove_nginx_config" class="table-of-contents__link toc-highlight">ynh_remove_nginx_config</a></li><li><a href="#ynh_change_url_nginx_config" class="table-of-contents__link toc-highlight">ynh_change_url_nginx_config</a></li></ul></li><li><a href="#php" class="table-of-contents__link toc-highlight">PHP</a><ul><li><a href="#ynh_add_fpm_config" class="table-of-contents__link toc-highlight">ynh_add_fpm_config</a></li><li><a href="#ynh_remove_fpm_config" class="table-of-contents__link toc-highlight">ynh_remove_fpm_config</a></li></ul></li><li><a href="#systemd" class="table-of-contents__link toc-highlight">SYSTEMD</a><ul><li><a href="#ynh_add_systemd_config" class="table-of-contents__link toc-highlight">ynh_add_systemd_config</a></li><li><a href="#ynh_remove_systemd_config" class="table-of-contents__link toc-highlight">ynh_remove_systemd_config</a></li><li><a href="#ynh_systemd_action" class="table-of-contents__link toc-highlight">ynh_systemd_action</a></li></ul></li><li><a href="#fail2ban" class="table-of-contents__link toc-highlight">FAIL2BAN</a><ul><li><a href="#ynh_add_fail2ban_config" class="table-of-contents__link toc-highlight">ynh_add_fail2ban_config</a></li><li><a href="#ynh_remove_fail2ban_config" class="table-of-contents__link toc-highlight">ynh_remove_fail2ban_config</a></li></ul></li><li><a href="#logrotate" class="table-of-contents__link toc-highlight">LOGROTATE</a><ul><li><a href="#ynh_use_logrotate" class="table-of-contents__link toc-highlight">ynh_use_logrotate</a></li><li><a href="#ynh_remove_logrotate" class="table-of-contents__link toc-highlight">ynh_remove_logrotate</a></li></ul></li></ul></li><li><a href="#misc-tools" class="table-of-contents__link toc-highlight">Misc Tools</a><ul><li><a href="#utils" class="table-of-contents__link toc-highlight">UTILS</a><ul><li><a href="#ynh_local_curl" class="table-of-contents__link toc-highlight">ynh_local_curl</a></li><li><a href="#ynh_secure_remove" class="table-of-contents__link toc-highlight">ynh_secure_remove</a></li><li><a href="#ynh_read_manifest" class="table-of-contents__link toc-highlight">ynh_read_manifest</a></li><li><a href="#ynh_app_upstream_version" class="table-of-contents__link toc-highlight">ynh_app_upstream_version</a></li><li><a href="#ynh_check_app_version_changed" class="table-of-contents__link toc-highlight">ynh_check_app_version_changed</a></li><li><a href="#ynh_compare_current_package_version" class="table-of-contents__link toc-highlight">ynh_compare_current_package_version</a></li><li><a href="#ynh_user_exists" class="table-of-contents__link toc-highlight">ynh_user_exists</a></li><li><a href="#ynh_user_get_info" class="table-of-contents__link toc-highlight">ynh_user_get_info</a></li><li><a href="#ynh_user_list" class="table-of-contents__link toc-highlight">ynh_user_list</a></li></ul></li><li><a href="#setting" class="table-of-contents__link toc-highlight">SETTING</a><ul><li><a href="#ynh_app_setting_get" class="table-of-contents__link toc-highlight">ynh_app_setting_get</a></li><li><a href="#ynh_app_setting_set" class="table-of-contents__link toc-highlight">ynh_app_setting_set</a></li><li><a href="#ynh_app_setting_set_default" class="table-of-contents__link toc-highlight">ynh_app_setting_set_default</a></li><li><a href="#ynh_app_setting_delete" class="table-of-contents__link toc-highlight">ynh_app_setting_delete</a></li></ul></li><li><a href="#string" class="table-of-contents__link toc-highlight">STRING</a><ul><li><a href="#ynh_string_random" class="table-of-contents__link toc-highlight">ynh_string_random</a></li><li><a href="#ynh_replace_string" class="table-of-contents__link toc-highlight">ynh_replace_string</a></li><li><a href="#ynh_replace_special_string" class="table-of-contents__link toc-highlight">ynh_replace_special_string</a></li></ul></li><li><a href="#backup" class="table-of-contents__link toc-highlight">BACKUP</a><ul><li><a href="#ynh_backup" class="table-of-contents__link toc-highlight">ynh_backup</a></li><li><a href="#ynh_restore" class="table-of-contents__link toc-highlight">ynh_restore</a></li><li><a href="#ynh_restore_file" class="table-of-contents__link toc-highlight">ynh_restore_file</a></li><li><a href="#ynh_store_file_checksum" class="table-of-contents__link toc-highlight">ynh_store_file_checksum</a></li><li><a href="#ynh_backup_if_checksum_is_different" class="table-of-contents__link toc-highlight">ynh_backup_if_checksum_is_different</a></li><li><a href="#ynh_delete_file_checksum" class="table-of-contents__link toc-highlight">ynh_delete_file_checksum</a></li></ul></li><li><a href="#logging" class="table-of-contents__link toc-highlight">LOGGING</a><ul><li><a href="#ynh_die" class="table-of-contents__link toc-highlight">ynh_die</a></li><li><a href="#ynh_print_info" class="table-of-contents__link toc-highlight">ynh_print_info</a></li><li><a href="#ynh_print_warn" class="table-of-contents__link toc-highlight">ynh_print_warn</a></li><li><a href="#ynh_print_err" class="table-of-contents__link toc-highlight">ynh_print_err</a></li><li><a href="#ynh_exec_err" class="table-of-contents__link toc-highlight">ynh_exec_err</a></li><li><a href="#ynh_exec_warn" class="table-of-contents__link toc-highlight">ynh_exec_warn</a></li><li><a href="#ynh_exec_warn_less" class="table-of-contents__link toc-highlight">ynh_exec_warn_less</a></li><li><a href="#ynh_exec_quiet" class="table-of-contents__link toc-highlight">ynh_exec_quiet</a></li><li><a href="#ynh_exec_fully_quiet" class="table-of-contents__link toc-highlight">ynh_exec_fully_quiet</a></li><li><a href="#ynh_exec_and_print_stderr_only_if_error" class="table-of-contents__link toc-highlight">ynh_exec_and_print_stderr_only_if_error</a></li><li><a href="#ynh_script_progression" class="table-of-contents__link toc-highlight">ynh_script_progression</a></li><li><a href="#ynh_return" class="table-of-contents__link toc-highlight">ynh_return</a></li></ul></li><li><a href="#multimedia" class="table-of-contents__link toc-highlight">MULTIMEDIA</a><ul><li><a href="#ynh_multimedia_build_main_dir" class="table-of-contents__link toc-highlight">ynh_multimedia_build_main_dir</a></li><li><a href="#ynh_multimedia_addfolder" class="table-of-contents__link toc-highlight">ynh_multimedia_addfolder</a></li><li><a href="#ynh_multimedia_addaccess" class="table-of-contents__link toc-highlight">ynh_multimedia_addaccess</a></li></ul></li></ul></li><li><a href="#deprecated-or-handled-by-the-core--app-resources-since-v2" class="table-of-contents__link toc-highlight">Deprecated Or Handled By The Core / App Resources Since V2</a><ul><li><a href="#permission" class="table-of-contents__link toc-highlight">PERMISSION</a><ul><li><a href="#ynh_permission_create" class="table-of-contents__link toc-highlight">ynh_permission_create</a></li><li><a href="#ynh_permission_delete" class="table-of-contents__link toc-highlight">ynh_permission_delete</a></li><li><a href="#ynh_permission_exists" class="table-of-contents__link toc-highlight">ynh_permission_exists</a></li><li><a href="#ynh_permission_url" class="table-of-contents__link toc-highlight">ynh_permission_url</a></li><li><a href="#ynh_permission_update" class="table-of-contents__link toc-highlight">ynh_permission_update</a></li><li><a href="#ynh_permission_has_user" class="table-of-contents__link toc-highlight">ynh_permission_has_user</a></li><li><a href="#ynh_legacy_permissions_exists" class="table-of-contents__link toc-highlight">ynh_legacy_permissions_exists</a></li><li><a href="#ynh_legacy_permissions_delete_all" class="table-of-contents__link toc-highlight">ynh_legacy_permissions_delete_all</a></li></ul></li><li><a href="#apt" class="table-of-contents__link toc-highlight">APT</a><ul><li><a href="#ynh_package_is_installed" class="table-of-contents__link toc-highlight">ynh_package_is_installed</a></li><li><a href="#ynh_install_app_dependencies" class="table-of-contents__link toc-highlight">ynh_install_app_dependencies</a></li><li><a href="#ynh_remove_app_dependencies" class="table-of-contents__link toc-highlight">ynh_remove_app_dependencies</a></li><li><a href="#ynh_install_extra_app_dependencies" class="table-of-contents__link toc-highlight">ynh_install_extra_app_dependencies</a></li></ul></li><li><a href="#systemuser" class="table-of-contents__link toc-highlight">SYSTEMUSER</a><ul><li><a href="#ynh_system_user_create" class="table-of-contents__link toc-highlight">ynh_system_user_create</a></li><li><a href="#ynh_system_user_delete" class="table-of-contents__link toc-highlight">ynh_system_user_delete</a></li><li><a href="#ynh_exec_as" class="table-of-contents__link toc-highlight">ynh_exec_as</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/YunoHost" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Build with Docusaurus for YunoHost</div></div></div></footer></div>
</body>
</html>